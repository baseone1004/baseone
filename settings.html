<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BaseOne Settings</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;margin:0;background:#0f1630;color:#f8faff}
    .wrap{max-width:860px;margin:0 auto;padding:16px}
    .box{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.14);border-radius:14px;padding:14px;margin:10px 0}
    input,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:#fff;outline:none}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .col{flex:1;min-width:240px}
    .btn{padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.08);color:#fff;font-weight:800;cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,#7aa7ff,#2f6bff);border:none}
    .btn.good{background:linear-gradient(135deg,#38e1c1,#1fb6ff);border:none}
    .small{opacity:.8;font-size:12px;line-height:1.5}
    a{color:#a9c6ff}
  </style>
</head>
<body>
<div class="wrap">
  <h2 style="margin:0 0 6px">âš™ï¸ Settings</h2>
  <div class="small">ì €ì¥í•˜ë©´ ë¸Œë¼ìš°ì €(localStorage)ì— ì €ì¥ë©ë‹ˆë‹¤. <a href="/">â† ë©”ì¸ìœ¼ë¡œ</a></div>

  <div class="box">
    <h3 style="margin:0 0 10px">ì„œë²„ / API í‚¤</h3>
    <div class="row">
      <div class="col">
        <div class="small">Backend URL (Render ì£¼ì†Œ)</div>
        <input id="backend" placeholder="ì˜ˆ: https://baseone11.onrender.com"/>
      </div>
      <div class="col">
        <div class="small">Pexels API Key</div>
        <input id="pexels" placeholder="pexels key"/>
      </div>
    </div>
    <div style="margin-top:10px">
      <div class="small">ì´ë¯¸ì§€ ê³µê¸‰ì</div>
      <select id="img_provider" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,.14);background:rgba(255,255,255,.06);color:#fff;outline:none">
        <option value="pexels">pexels</option>
      </select>
    </div>

    <div style="margin-top:10px" class="small">
      Gemini API KeyëŠ” Render í™˜ê²½ë³€ìˆ˜(GEMINI_API_KEY)ë¡œ ë„£ëŠ” ê±¸ ê¶Œì¥í•©ë‹ˆë‹¤. (ë¸Œë¼ìš°ì € ì €ì¥ì€ ë…¸ì¶œ ìœ„í—˜)
    </div>
  </div>

  <div class="box">
    <h3 style="margin:0 0 10px">ë¸”ë¡œê·¸ ëª©ë¡</h3>

    <div class="small">ë¸”ë¡œê·¸ìŠ¤íŒŸì€ ë©”ì¸ í™”ë©´ì—ì„œ [ğŸ” ë¸”ë¡œê·¸ìŠ¤íŒŸ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°]ë¡œ ìë™ ì €ì¥í•˜ëŠ” ê±¸ ê¶Œì¥í•©ë‹ˆë‹¤.</div>
    <div style="margin-top:10px">
      <div class="small">ë„¤ì´ë²„ ë¸”ë¡œê·¸ 3ê°œ (ì´ë¦„|URL í•œ ì¤„ì”©)</div>
      <textarea id="naver" rows="4" placeholder="ì˜ˆ) ë‚´ë„¤ì´ë²„|https://blog.naver.com/ì•„ì´ë””"></textarea>
      <div class="small">â€» ë„¤ì´ë²„ëŠ” ìë™ë°œí–‰ ë¯¸ì§€ì›(ê¸°ë³¸). ë³µì‚¬/ë¶™ì—¬ë„£ê¸° ìš©ë„.</div>
    </div>
  </div>

  <div class="row" style="margin-top:10px">
    <button class="btn primary" onclick="save()">ğŸ’¾ ì €ì¥</button>
    <button class="btn" onclick="load()">â†©ï¸ ë¶ˆëŸ¬ì˜¤ê¸°</button>
    <a href="/"><button class="btn good" type="button">ë©”ì¸ìœ¼ë¡œ</button></a>
  </div>

  <div class="box">
    <h3 style="margin:0 0 10px">Render í™˜ê²½ë³€ìˆ˜(ì¤‘ìš”)</h3>
    <div class="small">
      Render > Environment ì— ì•„ë˜ë¥¼ ë„£ì–´ì•¼ ë¸”ë¡œê·¸ìŠ¤íŒŸ ìë™ë°œí–‰ì´ ë©ë‹ˆë‹¤.<br><br>
      <b>GOOGLE_CLIENT_ID</b><br>
      <b>GOOGLE_CLIENT_SECRET</b><br>
      <b>OAUTH_REDIRECT_URI</b> (ì˜ˆ: https://ë„ˆì˜ë„ë©”ì¸.onrender.com/oauth/callback)<br>
      <b>GEMINI_API_KEY</b><br><br>
      OAuth ì—°ê²°ì€ ë©”ì¸ì—ì„œ "OAuth ì—°ê²°" ëˆ„ë¥´ê³  ë¡œê·¸ì¸ â†’ ê¶Œí•œ í—ˆìš©í•˜ë©´ ë©ë‹ˆë‹¤.
    </div>
  </div>
</div>

<script>
const KEY="baseone_settings_v3";

function parseNaverLines(text){
  const lines = (text||"").split("\n").map(s=>s.trim()).filter(Boolean);
  return lines.slice(0,3).map(line=>{
    const [name,url] = line.split("|").map(s=> (s||"").trim());
    return {name:name||"ë„¤ì´ë²„", url:url||""};
  });
}

function save(){
  const old = JSON.parse(localStorage.getItem(KEY)||"{}");
  const backend = (document.getElementById("backend").value||"").trim();
  const pexels_key = (document.getElementById("pexels").value||"").trim();
  const img_provider = (document.getElementById("img_provider").value||"pexels").trim();
  const naverText = document.getElementById("naver").value||"";

  const v3 = {
    ...old,
    backend,
    pexels_key,
    img_provider,
    // blogspotì€ ë©”ì¸ì—ì„œ syncë¡œ ì±„ìš°ëŠ” ê±¸ ê¶Œì¥
    blogspot: old.blogspot || [],
    naver: parseNaverLines(naverText)
  };
  localStorage.setItem(KEY, JSON.stringify(v3));
  alert("ì €ì¥ ì™„ë£Œ!");
}

function load(){
  const v3 = JSON.parse(localStorage.getItem(KEY)||"{}");
  document.getElementById("backend").value = v3.backend || location.origin;
  document.getElementById("pexels").value = v3.pexels_key || "";
  document.getElementById("img_provider").value = v3.img_provider || "pexels";

  const naverLines = (v3.naver||[]).slice(0,3).map(x=>`${x.name||"ë„¤ì´ë²„"}|${x.url||""}`).join("\n");
  document.getElementById("naver").value = naverLines;
}
load();
</script>
</body>
</html>
