<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BaseOne ì„¤ì •</title>
  <style>
    :root{--bg:#0f1630;--panel:rgba(255,255,255,.06);--text:#f8faff;--muted:rgba(248,250,255,.75);--border:rgba(255,255,255,.14);--primary:#7aa7ff;--good:#38e1c1;--danger:#ff7b7b;--shadow:0 10px 24px rgba(0,0,0,.22);}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Noto Sans KR",Segoe UI,Roboto,sans-serif;background:linear-gradient(180deg,var(--bg),#0a1022);color:var(--text);font-size:13px}
    .wrap{max-width:900px;margin:0 auto;padding:12px}
    .top{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:10px}
    .box{background:var(--panel);border:1px solid var(--border);padding:12px;border-radius:16px;margin:10px 0;box-shadow:var(--shadow)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:space-between}
    input,select,textarea{padding:9px 10px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);outline:none;font-size:12.5px;min-width:280px}
    textarea{min-width:100%;min-height:120px}
    .btn{padding:8px 11px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);cursor:pointer;font-weight:900;font-size:12px}
    .btn.primary{background:linear-gradient(135deg,var(--primary),#2f6bff);border:none;color:#fff}
    .btn.good{background:linear-gradient(135deg,var(--good),#1fb6ff);border:none;color:#fff}
    .btn.danger{background:rgba(255,107,107,.10);border:1px solid rgba(255,107,107,.35);color:var(--danger)}
    .small{font-size:12px;color:var(--muted);line-height:1.5}
    code{background:rgba(0,0,0,.2);padding:2px 6px;border-radius:8px}
  </style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <div>
      <div style="font-weight:900;font-size:18px">âš™ï¸ BaseOne ì„¤ì •</div>
      <div class="small">í˜¼ì ì“°ëŠ” ìš©ë„: í‚¤/ì£¼ì†ŒëŠ” ë¸Œë¼ìš°ì €(LocalStorage)ì— ì €ì¥ë©ë‹ˆë‹¤.</div>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <a href="/"><button class="btn">â† ë©”ì¸</button></a>
      <button class="btn primary" onclick="save()">ğŸ’¾ ì €ì¥</button>
    </div>
  </div>

  <div class="box">
    <b>1) ì„œë²„ ì£¼ì†Œ</b>
    <div class="small">Render ì£¼ì†Œ ì˜ˆ: <code>https://xxxx.onrender.com</code></div>
    <div style="margin-top:8px">
      <input id="backend" placeholder="http://127.0.0.1:5000" />
    </div>
  </div>

  <div class="box">
    <b>2) Gemini (ê¸€ ìƒì„±)</b>
    <div class="small">
      Gemini API í‚¤ëŠ” Google AI Studioì—ì„œ ë°œê¸‰ë°›ëŠ” í‚¤ì…ë‹ˆë‹¤. 
    </div>
    <div style="margin-top:8px;display:grid;grid-template-columns:1fr 1fr;gap:8px">
      <input id="gemini_key" placeholder="GEMINI_API_KEY" />
      <input id="gemini_model" placeholder="ëª¨ë¸ (ì˜ˆ: gemini-3-flash-preview)" />
    </div>
    <div class="small" style="margin-top:8px">
      í˜¸ì¶œì€ <code>x-goog-api-key</code> í—¤ë”ë¡œ <code>generateContent</code>ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. :contentReference[oaicite:8]{index=8}
    </div>
  </div>

  <div class="box">
    <b>3) ì´ë¯¸ì§€</b>
    <div class="small">PexelsëŠ” URLì„ ê°€ì ¸ì˜¤ê³ , GeminiëŠ” â€œì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸â€ë§Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤(ì´ë¯¸ì§€ ìƒì„± URLì€ ì œê³µí•˜ì§€ ì•ŠìŒ).</div>
    <div style="margin-top:8px;display:grid;grid-template-columns:1fr 1fr;gap:8px">
      <select id="img_provider">
        <option value="pexels">Pexels (ì¶”ì²œ)</option>
        <option value="gemini">Gemini (í”„ë¡¬í”„íŠ¸ë§Œ)</option>
      </select>
      <input id="pexels_key" placeholder="PEXELS_API_KEY" />
    </div>
  </div>

  <div class="box">
    <b>4) ë¸”ë¡œê·¸ ìë™ë°œí–‰ ì§€ì›</b>
    <div class="small">
      âœ… ë¸”ë¡œê·¸ìŠ¤íŒŸ(=Blogger): OAuth ì—°ê²° í›„ ìë™ë°œí–‰/ì˜ˆì•½ë°œí–‰ ê°€ëŠ¥ <br/>
      âš ï¸ ë„¤ì´ë²„: ìë™ë°œí–‰ì€ ê³µì‹ APIê°€ ì•ˆì •ì ìœ¼ë¡œ ì œê³µë˜ì§€ ì•Šì•„ ì§€ì›í•˜ì§€ ì•ŠìŒ <br/>
      âš ï¸ í‹°ìŠ¤í† ë¦¬: Open APIê°€ ì¢…ë£Œ ê³µì§€ë˜ì–´ ìë™ë°œí–‰ì€ ë¹„ê¶Œì¥/ë¯¸ì§€ì› :contentReference[oaicite:11]{index=11}
    </div>
    <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
      <button class="btn good" onclick="connectBlogger()">ğŸ” ë¸”ë¡œê·¸ìŠ¤íŒŸ OAuth ì—°ê²°</button>
      <button class="btn" onclick="checkBlogger()">âœ… ì—°ê²° ìƒíƒœ í™•ì¸</button>
    </div>
    <div class="small" id="bloggerStatus" style="margin-top:8px">-</div>
  </div>

  <div class="box">
    <b>5) (ì„ íƒ) ë‚´ ë¸”ë¡œê·¸ URL ì €ì¥</b>
    <div class="small">ì›í•˜ë©´ ì €ì¥í•´ë‘ì„¸ìš”. ë¸”ë¡œê·¸ìŠ¤íŒŸì€ ì‹¤ì œ ë°œí–‰ì— <b>blog_id</b>ê°€ í•„ìš”í•´ì„œ ë©”ì¸ì—ì„œ â€œë‚´ ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸°â€ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.</div>
    <div style="margin-top:10px">
      <div class="small" style="font-weight:900">ë¸”ë¡œê·¸ìŠ¤íŒŸ URL (ìµœëŒ€ 10ê°œ, ì¤„ë°”ê¿ˆ)</div>
      <textarea id="blogspot_urls" placeholder="https://xxxx.blogspot.com"></textarea>
    </div>
    <div style="margin-top:10px">
      <div class="small" style="font-weight:900">ë„¤ì´ë²„ ë¸”ë¡œê·¸ URL (ìµœëŒ€ 3ê°œ, ì¤„ë°”ê¿ˆ)</div>
      <textarea id="naver_urls" placeholder="https://blog.naver.com/ì•„ì´ë””"></textarea>
    </div>
    <div style="margin-top:10px">
      <div class="small" style="font-weight:900">í‹°ìŠ¤í† ë¦¬ URL (ì¤„ë°”ê¿ˆ)</div>
      <textarea id="tistory_urls" placeholder="https://xxx.tistory.com"></textarea>
    </div>
  </div>
</div>

<script>
const KEY="baseone_settings_v4";
function load(){
  const d = JSON.parse(localStorage.getItem(KEY) || "{}");
  document.getElementById("backend").value = d.backend || location.origin;
  document.getElementById("gemini_key").value = d.gemini_key || "";
  document.getElementById("gemini_model").value = d.gemini_model || "gemini-3-flash-preview";
  document.getElementById("img_provider").value = d.img_provider || "pexels";
  document.getElementById("pexels_key").value = d.pexels_key || "";

  document.getElementById("blogspot_urls").value = (d.blogspot_urls||[]).join("\n");
  document.getElementById("naver_urls").value = (d.naver_urls||[]).join("\n");
  document.getElementById("tistory_urls").value = (d.tistory_urls||[]).join("\n");
}
function save(){
  const d = {
    backend: (document.getElementById("backend").value || "").trim().replace(/\/+$/,""),
    gemini_key: (document.getElementById("gemini_key").value || "").trim(),
    gemini_model: (document.getElementById("gemini_model").value || "").trim() || "gemini-3-flash-preview",
    img_provider: document.getElementById("img_provider").value,
    pexels_key: (document.getElementById("pexels_key").value || "").trim(),
    blogspot_urls: (document.getElementById("blogspot_urls").value||"").split("\n").map(s=>s.trim()).filter(Boolean).slice(0,10),
    naver_urls: (document.getElementById("naver_urls").value||"").split("\n").map(s=>s.trim()).filter(Boolean).slice(0,3),
    tistory_urls: (document.getElementById("tistory_urls").value||"").split("\n").map(s=>s.trim()).filter(Boolean),
  };
  localStorage.setItem(KEY, JSON.stringify(d));
  alert("ì €ì¥ ì™„ë£Œ!");
}

function apiBase(){
  const d = JSON.parse(localStorage.getItem(KEY) || "{}");
  return (d.backend || location.origin).replace(/\/+$/,"");
}

function connectBlogger(){
  window.open(apiBase()+"/oauth/blogger/start", "_blank");
}
async function checkBlogger(){
  const el=document.getElementById("bloggerStatus");
  el.textContent="í™•ì¸ ì¤‘...";
  try{
    const r=await fetch(apiBase()+"/api/blogger/status");
    const j=await r.json();
    el.textContent = j.connected ? "âœ… Blogger OAuth ì—°ê²°ë¨" : "âŒ ì•„ì§ ì—°ê²° ì•ˆë¨ (OAuth ì—°ê²° ë²„íŠ¼ í´ë¦­)";
  }catch(e){
    el.textContent="âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨";
  }
}

load();
</script>
</body>
</html>
