<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BaseOne ì„¤ì •</title>
  <style>
    :root{
      --bg:#0f1630;--panel:rgba(255,255,255,.06);--panel2:rgba(255,255,255,.08);
      --text:#f8faff;--muted:rgba(248,250,255,.75);--border:rgba(255,255,255,.14);
      --primary:#7aa7ff;--good:#38e1c1;--danger:#ff7b7b;--shadow:0 10px 24px rgba(0,0,0,.22);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Noto Sans KR",Segoe UI,Roboto,sans-serif;background:linear-gradient(180deg,var(--bg),#0a1022);color:var(--text);font-size:13px}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:980px;margin:0 auto;padding:12px}
    .top{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;padding:8px 4px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:34px;height:34px;border-radius:12px;background:linear-gradient(135deg,var(--primary),var(--good));display:flex;align-items:center;justify-content:center;font-weight:900;color:#fff;box-shadow:var(--shadow)}
    .title{font-size:18px;font-weight:900;line-height:1}
    .subtitle{font-size:12px;color:var(--muted);margin-top:4px}
    .box{background:var(--panel);border:1px solid var(--border);padding:12px;border-radius:16px;margin:10px 0;box-shadow:var(--shadow)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:space-between}
    input,select,textarea{
      padding:9px 10px;border-radius:12px;border:1px solid var(--border);
      background:rgba(255,255,255,.06);color:var(--text);outline:none;font-size:12.5px;width:100%;
    }
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
    .btn{padding:8px 11px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);cursor:pointer;font-weight:900;font-size:12px}
    .btn.primary{background:linear-gradient(135deg,var(--primary),#2f6bff);border:none;color:#fff}
    .btn.good{background:linear-gradient(135deg,var(--good),#1fb6ff);border:none;color:#fff}
    .btn.danger{background:rgba(255,107,107,.10);border:1px solid rgba(255,107,107,.35);color:var(--danger)}
    .small{font-size:12px;color:var(--muted);line-height:1.55}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid var(--border);color:var(--muted);font-size:12px}
    .sep{height:1px;background:var(--border);margin:10px 0}
    .list{display:grid;gap:8px;margin-top:8px}
    .hint{padding:10px;border:1px dashed rgba(255,255,255,.22);border-radius:12px;background:rgba(255,255,255,.04)}
  </style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <div class="brand">
      <div class="logo">B</div>
      <div>
        <div class="title">BaseOne ì„¤ì •</div>
        <div class="subtitle">API í‚¤ + ë¸”ë¡œê·¸ ëª©ë¡ ì €ì¥</div>
      </div>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
      <span class="pill">ğŸ›°ï¸ ì„œë²„ <b id="sv">-</b></span>
      <a href="/"><button class="btn">â¬…ï¸ ë©”ì¸</button></a>
      <button class="btn primary" onclick="save()">ğŸ’¾ ì €ì¥</button>
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>1) ì„œë²„ ì£¼ì†Œ</b>
        <div class="small">Render ë°°í¬ ì£¼ì†Œë¥¼ ë„£ìœ¼ë©´, ë©”ì¸í™”ë©´ì—ì„œ ê·¸ ì„œë²„ë¡œ í˜¸ì¶œí•©ë‹ˆë‹¤.</div>
      </div>
    </div>
    <div class="list">
      <input id="backend" placeholder="ì˜ˆ) https://ë„ˆì„œë¹„ìŠ¤.onrender.com" />
      <div class="small mono" id="originHint"></div>
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>2) Gemini ê¸€ ìƒì„± API</b>
        <div class="small">ì„œë²„ê°€ /api/generate í˜¸ì¶œí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.</div>
      </div>
    </div>
    <div class="grid" style="margin-top:10px">
      <div>
        <div class="small">GEMINI_API_KEY</div>
        <input id="gemini_key" placeholder="AIza..." />
      </div>
      <div>
        <div class="small">Gemini ëª¨ë¸</div>
        <select id="gemini_model">
          <option value="gemini-1.5-flash">gemini-1.5-flash (ì¶”ì²œ)</option>
          <option value="gemini-1.5-pro">gemini-1.5-pro (í’ˆì§ˆâ†‘/ëŠë¦¼)</option>
        </select>
      </div>
    </div>
    <div class="hint small" style="margin-top:10px">
      âœ… Render í™˜ê²½ë³€ìˆ˜ë¡œ GEMINI_API_KEYë¥¼ ë„£ì—ˆë‹¤ë©´, ì—¬ê¸° ì…ë ¥ì€ ìƒëµí•´ë„ ë˜ì§€ë§Œ<br>
      ì§€ê¸ˆì²˜ëŸ¼ â€œí˜¼ì ì“°ëŠ” í”„ë¡œê·¸ë¨â€ì´ë©´ ì—¬ê¸° ì €ì¥í•´ë‘ëŠ” ê²Œ í¸í•©ë‹ˆë‹¤.
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>3) Pexels ì´ë¯¸ì§€ API</b>
        <div class="small">ì¸ë„¤ì¼ ìë™ ê²€ìƒ‰ì— ì‚¬ìš©í•©ë‹ˆë‹¤.</div>
      </div>
    </div>
    <div class="list" style="margin-top:10px">
      <input id="pexels_key" placeholder="Pexels API Key" />
      <div class="small">ì´ë¯¸ì§€ ì œê³µ: <b>pexels</b> (í˜„ì¬ ë²„ì „)</div>
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>4) ë¸”ë¡œê·¸ ì£¼ì†Œ ì €ì¥</b>
        <div class="small">ì£¼ì†ŒëŠ” â€œëª©ë¡ ê´€ë¦¬ìš©â€ì´ê³ , ë¸”ë¡œê·¸ìŠ¤íŒŸ ìë™ë°œí–‰ì€ OAuth í›„ blog_idë¡œ í•©ë‹ˆë‹¤.</div>
      </div>
      <div class="small mono">ë¸”ë¡œê·¸ìŠ¤íŒŸ 10ê°œ / ë„¤ì´ë²„ 3ê°œ</div>
    </div>

    <div class="sep"></div>

    <div class="grid">
      <div>
        <b>ğŸŸ¦ ë¸”ë¡œê·¸ìŠ¤íŒŸ ì£¼ì†Œ (ìµœëŒ€ 10)</b>
        <div class="list" id="blogspotList"></div>
        <button class="btn" onclick="addInput('blogspot')">+ ì¶”ê°€</button>
      </div>

      <div>
        <b>ğŸŸ© ë„¤ì´ë²„ ì£¼ì†Œ (ìµœëŒ€ 3)</b>
        <div class="list" id="naverList"></div>
        <button class="btn" onclick="addInput('naver')">+ ì¶”ê°€</button>
      </div>
    </div>

    <div class="hint small" style="margin-top:10px">
      âš ï¸ ë„¤ì´ë²„ëŠ” â€œìë™ë°œí–‰â€ì„ ê³µì‹ì ìœ¼ë¡œ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ë§ì•„(ë˜ëŠ” ë§¤ìš° ê¹Œë‹¤ë¡œì›€)<br>
      í˜„ì¬ ë²„ì „ì€ <b>HTML ë³µì‚¬ â†’ ìˆ˜ë™ ì—…ë¡œë“œ</b> í˜•íƒœë¡œ ì“°ëŠ” ê±¸ ê¸°ë³¸ìœ¼ë¡œ ì¡ì•˜ìŠµë‹ˆë‹¤.
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>5) Blogger OAuth</b>
        <div class="small">ë¸”ë¡œê·¸ìŠ¤íŒŸ ìë™ë°œí–‰/ì˜ˆì•½ì„ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.</div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn good" onclick="oauth()">ğŸ” OAuth ì—°ê²°</button>
        <button class="btn" onclick="checkOauth()">âœ… ì—°ê²°ìƒíƒœ</button>
      </div>
    </div>
    <div class="small mono" id="oauthState" style="margin-top:8px">-</div>
  </div>
</div>

<script>
const KEY="baseone_settings_v4";

function load(){
  const d = JSON.parse(localStorage.getItem(KEY) || "{}");
  document.getElementById("backend").value = d.backend || location.origin;
  document.getElementById("gemini_key").value = d.gemini_key || "";
  document.getElementById("gemini_model").value = d.gemini_model || "gemini-1.5-flash";
  document.getElementById("pexels_key").value = d.pexels_key || "";

  renderList("blogspot", d.blogspot_urls || [], 10);
  renderList("naver", d.naver_urls || [], 3);

  document.getElementById("sv").textContent = (d.backend || location.origin).replace(/\/+$/,"");
  document.getElementById("originHint").textContent = "í˜„ì¬ í˜ì´ì§€ origin: " + location.origin;
}

function renderList(type, arr, limit){
  const box = document.getElementById(type+"List");
  box.innerHTML="";
  const items = (arr || []).slice(0, limit);
  while(items.length < limit) items.push("");

  items.forEach((v, idx)=>{
    const input=document.createElement("input");
    input.placeholder = (type==="blogspot")
      ? `ë¸”ë¡œê·¸ìŠ¤íŒŸ ì£¼ì†Œ ${idx+1} (ì˜ˆ: https://xxx.blogspot.com)`
      : `ë„¤ì´ë²„ ì£¼ì†Œ ${idx+1}`;
    input.value = v || "";
    input.dataset.type = type;
    box.appendChild(input);
  });
}

function addInput(type){
  const d = get();
  const key = (type==="blogspot") ? "blogspot_urls" : "naver_urls";
  const limit = (type==="blogspot") ? 10 : 3;
  const arr = (d[key] || []).slice(0, limit);
  if(arr.length >= limit){ alert("ìµœëŒ€ ê°œìˆ˜ì…ë‹ˆë‹¤."); return; }
  arr.push("");
  d[key] = arr;
  localStorage.setItem(KEY, JSON.stringify(d));
  renderList(type, d[key], limit);
}

function get(){
  return JSON.parse(localStorage.getItem(KEY) || "{}");
}

function save(){
  const d = get();
  d.backend = (document.getElementById("backend").value || location.origin).trim();
  d.gemini_key = (document.getElementById("gemini_key").value || "").trim();
  d.gemini_model = (document.getElementById("gemini_model").value || "gemini-1.5-flash").trim();
  d.pexels_key = (document.getElementById("pexels_key").value || "").trim();

  d.blogspot_urls = Array.from(document.querySelectorAll('#blogspotList input'))
    .map(i=>i.value.trim()).filter(Boolean).slice(0,10);

  d.naver_urls = Array.from(document.querySelectorAll('#naverList input'))
    .map(i=>i.value.trim()).filter(Boolean).slice(0,3);

  localStorage.setItem(KEY, JSON.stringify(d));
  document.getElementById("sv").textContent = d.backend.replace(/\/+$/,"");
  alert("ì €ì¥ ì™„ë£Œ!");
}

function apiBase(){
  const d=get();
  return (d.backend || location.origin).replace(/\/+$/,"");
}

function oauth(){
  window.open(apiBase()+"/oauth/start", "_blank");
}

async function checkOauth(){
  try{
    const res = await fetch(apiBase()+"/api/oauth/status");
    const j = await res.json();
    document.getElementById("oauthState").textContent = JSON.stringify(j);
    if(j.connected) alert("OAuth ì—°ê²°ë¨ âœ…");
    else alert("OAuth ë¯¸ì—°ê²° âŒ / ë¨¼ì € OAuth ì—°ê²°í•˜ì„¸ìš”");
  }catch(e){
    alert("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
  }
}

load();
</script>
</body>
</html>
