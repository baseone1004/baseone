<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BaseOne</title>

<style>
  :root{
    --bg1:#070A16;
    --bg2:#0B1226;
    --card:#121A33;
    --card2:#0F1730;
    --line:rgba(255,255,255,.10);
    --text:#EAF0FF;
    --muted:#AAB6DA;
    --blue:#4F8CFF;
    --blue2:#2F6BFF;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --radius:18px;
    --ok:#22c55e;
    --warn:#fbbf24;
    --bad:#ef4444;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Apple SD Gothic Neo","Noto Sans KR", sans-serif;
    color:var(--text);
    background:
      radial-gradient(1200px 600px at 15% 0%, rgba(79,140,255,.25), transparent 55%),
      radial-gradient(900px 500px at 90% 15%, rgba(74,222,128,.12), transparent 55%),
      linear-gradient(180deg, var(--bg1), var(--bg2));
    min-height:100vh;
  }

  .wrap{max-width:1100px;margin:0 auto;padding:18px 16px 40px;}

  .top{
    display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
    padding:14px 14px;
    background:rgba(255,255,255,.04);
    border:1px solid var(--line);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
  }
  .brand{display:flex; align-items:center; gap:12px;}
  .logo{
    width:38px; height:38px; border-radius:14px;
    background: linear-gradient(135deg, var(--blue), rgba(79,140,255,.25));
    display:flex; align-items:center; justify-content:center;
    font-weight:900; letter-spacing:-.5px;
    box-shadow: 0 10px 24px rgba(79,140,255,.22);
  }
  .title{font-size:22px; font-weight:900; letter-spacing:-.6px;}
  .sub{font-size:12px; color:var(--muted); margin-top:2px;}
  .right{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}

  .pill{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 12px; border-radius:999px;
    background:rgba(255,255,255,.04);
    border:1px solid var(--line);
    color:var(--muted);
    font-size:12px;
  }

  .btn{
    border:1px solid var(--line);
    background:rgba(255,255,255,.04);
    color:var(--text);
    padding:10px 14px;
    border-radius:14px;
    cursor:pointer;
    font-weight:900;
    transition:.15s transform, .15s opacity, .15s background;
    white-space:nowrap;
  }
  .btn:hover{transform: translateY(-1px); background:rgba(255,255,255,.06)}
  .btn.primary{
    border:none;
    background: linear-gradient(135deg, var(--blue), var(--blue2));
    box-shadow: 0 14px 26px rgba(79,140,255,.18);
  }
  .btn.primary:hover{opacity:.95}
  .btn.small{padding:8px 10px; border-radius:12px; font-size:12px;}
  .btn.ok{border:none;background:rgba(34,197,94,.16); color:#d7ffe6; }
  .btn.warn{border:none;background:rgba(251,191,36,.16); color:#fff2cc; }
  .btn.bad{border:none;background:rgba(239,68,68,.16); color:#ffe0e0; }

  .section{
    margin-top:16px;
    background:rgba(255,255,255,.04);
    border:1px solid var(--line);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow:hidden;
  }

  .sectionHead{
    display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
    padding:14px 14px;
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    border-bottom:1px solid var(--line);
  }
  .sectionHead b{font-size:14px}
  .hint{color:var(--muted); font-size:12px}

  .tools{
    display:flex; gap:10px; flex-wrap:wrap; align-items:center;
  }
  .input{
    min-width:240px;
    padding:10px 12px;
    border-radius:14px;
    background: rgba(0,0,0,.18);
    border:1px solid var(--line);
    color:var(--text);
    outline:none;
  }

  .blogBox{
    margin-top:12px;
    width:100%;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    flex-wrap:wrap;
  }
  .blogBtns{display:flex; gap:8px; flex-wrap:wrap;}
  .blogState{color:var(--muted); font-size:12px;}
  .blogState b{color:var(--text)}

  .grid{
    display:grid;
    grid-template-columns: repeat(4, 1fr);
    gap:12px;
    padding:14px;
  }
  @media (max-width: 980px){ .grid{grid-template-columns: repeat(2, 1fr);} }
  @media (max-width: 520px){
    .grid{grid-template-columns: repeat(1, 1fr);}
    .input{min-width: 100%;}
  }

  .cat{
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid var(--line);
    border-radius: 18px;
    padding:14px;
    cursor:pointer;
    transition:.15s transform, .15s border;
    display:flex;
    align-items:center;
    gap:12px;
  }
  .cat:hover{transform: translateY(-2px); border-color: rgba(79,140,255,.35);}
  .catIcon{
    width:42px; height:42px; border-radius:16px;
    display:flex; align-items:center; justify-content:center;
    background: rgba(79,140,255,.14);
    border:1px solid rgba(79,140,255,.25);
    font-size:20px;
    flex:0 0 auto;
  }
  .catName{font-weight:900; letter-spacing:-.4px;}
  .catDesc{margin-top:4px; color:var(--muted); font-size:12px;}
  .tag{
    margin-left:auto;
    display:inline-flex; align-items:center;
    font-size:11px; color:var(--muted);
    padding:6px 10px;
    border-radius:999px;
    background: rgba(0,0,0,.18);
    border:1px solid var(--line);
  }

  .listWrap{padding:14px;}
  .empty{
    padding:18px;
    border-radius: 18px;
    border:1px dashed rgba(255,255,255,.18);
    color:var(--muted);
    background: rgba(0,0,0,.10);
    text-align:center;
  }
  .cards{
    display:grid;
    grid-template-columns: repeat(2, 1fr);
    gap:12px;
  }
  @media (max-width: 820px){ .cards{grid-template-columns:1fr;} }

  .card{
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid var(--line);
    border-radius:18px;
    padding:12px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    transition:.15s transform, .15s border;
  }
  .card:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.18);}
  .cardTitle{font-weight:900; letter-spacing:-.3px;}
  .cardMeta{font-size:12px; color:var(--muted); margin-top:3px;}
  .cardBtns{display:flex; gap:8px; flex-wrap:wrap;}

  /* ë°œí–‰ ì„¹ì…˜ */
  .publishGrid{
    display:grid;
    grid-template-columns: 1.2fr .8fr;
    gap:12px;
    padding:14px;
    border-top:1px solid var(--line);
    background: rgba(0,0,0,.10);
  }
  @media(max-width:900px){ .publishGrid{grid-template-columns:1fr;} }

  .panel{
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid var(--line);
    border-radius:18px;
    padding:14px;
  }
  .panelTitle{font-weight:900; margin-bottom:10px;}
  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
  select{
    padding:10px 12px;
    border-radius:14px;
    background: rgba(0,0,0,.18);
    border:1px solid var(--line);
    color:var(--text);
    outline:none;
  }
  .mini{font-size:12px;color:var(--muted)}

  .toast{
    position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
    background: rgba(10,16,34,.92);
    border:1px solid rgba(255,255,255,.14);
    padding:10px 12px;
    border-radius: 14px;
    box-shadow: var(--shadow);
    color:var(--text);
    font-size:12px;
    display:none;
    z-index:9999;
    max-width: calc(100vw - 40px);
  }
</style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo">B</div>
        <div>
          <div class="title">BaseOne</div>
          <div class="sub">ì¹´í…Œê³ ë¦¬/ìˆ˜ìµí˜• ì£¼ì œë¥¼ ì¹´ë“œë¡œ ë§Œë“¤ê³ , ë³µì‚¬í•´ì„œ ë°”ë¡œ í¬ìŠ¤íŒ…ì— ì“°ì„¸ìš”.</div>
        </div>
      </div>

      <div class="right">
        <span class="pill">ì„œë²„: <b id="serverState">-</b></span>
        <a href="/settings" style="text-decoration:none"><button class="btn">ì„¤ì •</button></a>
        <button class="btn primary" onclick="makeMoney()">ğŸ’° ìˆ˜ìµí˜• ì£¼ì œ 100</button>
      </div>
    </div>

    <div class="section">
      <div class="sectionHead">
        <div>
          <b id="titleBox">ì£¼ì œ ìƒì„±</b>
          <div class="hint" id="selInfo">ì•„ë˜ì—ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”.</div>

          <div class="blogBox">
            <div class="blogBtns">
              <button class="btn small" id="b_blogspot" onclick="selectBlog('blogspot')">ë¸”ë¡œê·¸ìŠ¤íŒŸ</button>
              <button class="btn small" id="b_naver" onclick="selectBlog('naver')">ë„¤ì´ë²„</button>
              <button class="btn small" id="b_tistory" onclick="selectBlog('tistory')">í‹°ìŠ¤í† ë¦¬</button>
            </div>
            <div class="blogState">ì„ íƒ ë¸”ë¡œê·¸: <b id="blogLabel">ì—†ìŒ</b></div>
          </div>
        </div>

        <div class="tools">
          <input class="input" id="filter" placeholder="ì£¼ì œ ê²€ìƒ‰(í•„í„°)" oninput="render()">
          <button class="btn small" onclick="copyAll()">ì „ì²´ë³µì‚¬</button>
        </div>
      </div>

      <div class="grid" id="catGrid"></div>

      <div class="listWrap">
        <div class="cards" id="topics"></div>
        <div class="empty" id="emptyBox" style="display:none;">ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ì˜ ì£¼ì œê°€ ì—¬ê¸°ì— ì¹´ë“œë¡œ ë‚˜ì™€ìš”.</div>
      </div>

      <!-- âœ… ë°œí–‰ ê¸°ëŠ¥ ì¶”ê°€ -->
      <div class="publishGrid">
        <div class="panel">
          <div class="panelTitle">ğŸ—“ï¸ ì˜ˆì•½ ë°œí–‰</div>
          <div class="mini">ì„ íƒí•œ ì£¼ì œë¥¼ ê¸°ì¤€ìœ¼ë¡œ â€œì˜ˆì•½ ìš”ì²­â€ì„ ì„œë²„ë¡œ ë³´ëƒ…ë‹ˆë‹¤. (ì‹¤ì œ ìë™ ì—…ë¡œë“œëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì—°ê²°)</div>
          <div style="height:10px"></div>
          <div class="row">
            <button class="btn primary" onclick="scheduleFixed3()">âœ… í•˜ë£¨ 3ê°œ ì˜ˆì•½ (08:00 / 13:00 / 18:00)</button>
            <button class="btn" onclick="previewSchedule()">ë¯¸ë¦¬ë³´ê¸°</button>
          </div>
          <div class="mini" id="schedulePreview" style="margin-top:10px"></div>
        </div>

        <div class="panel">
          <div class="panelTitle">âš¡ ì¦‰ì‹œ ë°œí–‰ (ê°„ê²© ì„ íƒ)</div>
          <div class="mini">ì§€ê¸ˆë¶€í„° ëª‡ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ë°œí–‰í• ì§€ ì„ íƒí•˜ê³  â€œì¦‰ì‹œ ë°œí–‰ ìš”ì²­â€ì„ ë³´ëƒ…ë‹ˆë‹¤.</div>
          <div style="height:10px"></div>

          <div class="row">
            <label class="mini">ì‹œì‘ ì‹œê°„</label>
            <input class="input" id="startTime" type="time" value="09:00" style="min-width:140px">
            <label class="mini">ê°„ê²©</label>
            <select id="intervalHours">
              <option value="1">1ì‹œê°„</option>
              <option value="2">2ì‹œê°„</option>
              <option value="3">3ì‹œê°„</option>
              <option value="4">4ì‹œê°„</option>
              <option value="6">6ì‹œê°„</option>
              <option value="12">12ì‹œê°„</option>
            </select>
          </div>

          <div style="height:10px"></div>
          <div class="row">
            <button class="btn primary" onclick="publishNowWithInterval()">ğŸš€ ì¦‰ì‹œ ë°œí–‰(ê°„ê²© ì ìš©)</button>
          </div>
          <div class="mini" id="nowInfo" style="margin-top:10px"></div>
        </div>
      </div>

    </div>
  </div>

  <div class="toast" id="toast">ë³µì‚¬ ì™„ë£Œ!</div>

<script>
  // ===== ì„œë²„ í‘œì‹œ(í‘œì‹œìš©) =====
  document.getElementById("serverState").textContent = "ë¡œì»¬(ì„ íƒ)";

  // ===== ë°ì´í„° =====
  const CATS = [
    {name:"ê±´ê°•", icon:"ğŸ«€", desc:"ìš´ë™Â·ì˜ì–‘Â·ìƒí™œê´€ë¦¬"},
    {name:"ì»´í“¨í„°/IT", icon:"ğŸ’»", desc:"ìœ í‹¸Â·ë³´ì•ˆÂ·ê°€ì´ë“œ"},
    {name:"ìë™ì°¨", icon:"ğŸš—", desc:"ì •ë¹„Â·ë³´í—˜Â·íŒ"},
    {name:"ìƒí™œ/ê°€ì „", icon:"ğŸ ", desc:"ì‚´ë¦¼Â·ê°€ì „Â·ì ˆì•½"},
    {name:"ìœ¡ì•„", icon:"ğŸ‘¶", desc:"ìœ¡ì•„í…œÂ·êµìœ¡"},
    {name:"ëˆ/ì¬í…Œí¬", icon:"ğŸ’°", desc:"ì ˆì•½Â·íˆ¬ìÂ·ì„¸ê¸ˆ"},
    {name:"ì—¬í–‰", icon:"âœˆï¸", desc:"ì½”ìŠ¤Â·ê¿€íŒ"},
    {name:"ìš”ë¦¬", icon:"ğŸ³", desc:"ë ˆì‹œí”¼Â·ì¥ë³´ê¸°"},
    {name:"ìê¸°ê³„ë°œ", icon:"ğŸ“ˆ", desc:"ìŠµê´€Â·ëª©í‘œ"},
    {name:"ê³µë¶€/ìê²©ì¦", icon:"ğŸ“š", desc:"ì‹œí—˜Â·í•©ê²©"},
    {name:"ë°˜ë ¤ë™ë¬¼", icon:"ğŸ¶", desc:"ì¼€ì–´Â·ìš©í’ˆ"},
    {name:"íŒ¨ì…˜/ë·°í‹°", icon:"ğŸ’„", desc:"ê´€ë¦¬Â·ì¶”ì²œ"},
    {name:"ì·¨ë¯¸", icon:"ğŸ¨", desc:"ì·¨ë¯¸Â·DIY"},
    {name:"ìŠ¤í¬ì¸ ", icon:"âš½", desc:"ìš´ë™Â·ë£¨í‹´"},
    {name:"ê²Œì„", icon:"ğŸ®", desc:"ë¦¬ë·°Â·íŒ"},
    {name:"ì˜í™”/ë“œë¼ë§ˆ", icon:"ğŸ¬", desc:"ì¶”ì²œÂ·ë¦¬ë·°"},
  ];

  let topics = [];
  let selectedTopic = "";
  let selectedCat = "";
  let selectedBlog = "";

  // ===== ì¹´í…Œê³ ë¦¬ ë Œë” =====
  const grid = document.getElementById("catGrid");
  CATS.forEach(c=>{
    const d = document.createElement("div");
    d.className = "cat";
    d.onclick = ()=>makeTopics(c.name);
    d.innerHTML = `
      <div class="catIcon">${c.icon}</div>
      <div style="flex:1">
        <div class="catName">${c.name}</div>
        <div class="catDesc">${c.desc}</div>
      </div>
      <span class="tag">50ê°œ</span>
    `;
    grid.appendChild(d);
  });

  // ===== ë¸”ë¡œê·¸ ì„ íƒ =====
  function selectBlog(blog){
    selectedBlog = blog;
    const map = {blogspot:"ë¸”ë¡œê·¸ìŠ¤íŒŸ", naver:"ë„¤ì´ë²„", tistory:"í‹°ìŠ¤í† ë¦¬"};
    document.getElementById("blogLabel").textContent = map[blog] || "ì—†ìŒ";
    ["blogspot","naver","tistory"].forEach(k=>{
      document.getElementById("b_"+k).classList.remove("primary");
    });
    document.getElementById("b_"+blog).classList.add("primary");
    updateSel();
    toast("ë¸”ë¡œê·¸ ì„ íƒë¨ âœ…");
  }

  // ===== ì£¼ì œ ìƒì„± =====
  function makeTopics(cat){
    selectedCat = cat;
    topics = [];
    for(let i=1;i<=50;i++){
      topics.push(`${cat} ê¸€ ì•„ì´ë””ì–´ ${i}`);
    }
    document.getElementById("titleBox").textContent = `${cat} ì£¼ì œ 50ê°œ`;
    selectedTopic = topics[0] || "";
    updateSel();
    render();
  }

  function makeMoney(){
    selectedCat = "ìˆ˜ìµí˜•";
    topics = [];
    const base = [
      "ë³´í—˜ ë¹„êµ/ì¶”ì²œ", "ì¹´ë“œ í˜œíƒ ì •ë¦¬", "í†µì‹ ë¹„ ì ˆì•½", "ì „ê¸°ìš”ê¸ˆ ì ˆì•½", "ëŒ€ì¶œ ê¸ˆë¦¬ ë¹„êµ",
      "ë¶€ì—… ì•„ì´ë””ì–´", "ì„¸ê¸ˆ ì‹ ê³ ", "ì—°ê¸ˆ/IRP", "ë‹¤ì´ì–´íŠ¸ ì œí’ˆ", "ì˜ì–‘ì œ ì¶”ì²œ",
      "ê°€ì „ êµ¬ë§¤ê°€ì´ë“œ", "ìœ¡ì•„í…œ ì¶”ì²œ", "ìë™ì°¨ ë³´í—˜", "ì—¬í–‰ ê²½ë¹„ ì ˆì•½", "ìê²©ì¦ ë¡œë“œë§µ",
      "ë…¸íŠ¸ë¶ êµ¬ë§¤", "ì²­ì†Œí…œ ì¶”ì²œ", "ìƒí™œë¹„ ì ˆì•½"
    ];
    for(let i=1;i<=100;i++){
      topics.push(`ìˆ˜ìµí˜• ì£¼ì œ ${i}: ${base[i % base.length]}`);
    }
    document.getElementById("titleBox").textContent = "ğŸ’° ìˆ˜ìµí˜• ì£¼ì œ 100ê°œ";
    selectedTopic = topics[0] || "";
    updateSel();
    render();
  }

  function updateSel(){
    const blogTxt = selectedBlog ? ` / ë¸”ë¡œê·¸: ${document.getElementById("blogLabel").textContent}` : "";
    document.getElementById("selInfo").textContent =
      selectedTopic ? `ì„ íƒí•œ ì£¼ì œ: ${selectedTopic}${blogTxt}` : "ì•„ë˜ì—ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”.";
  }

  // ===== ì£¼ì œ ì¹´ë“œ ë Œë” =====
  function render(){
    const q = (document.getElementById("filter").value || "").trim().toLowerCase();
    const list = document.getElementById("topics");
    const empty = document.getElementById("emptyBox");

    list.innerHTML = "";
    const filtered = q ? topics.filter(t => t.toLowerCase().includes(q)) : topics;

    if(!filtered.length){
      empty.style.display = "block";
      empty.textContent = topics.length ? "ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´ìš”." : "ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ì˜ ì£¼ì œê°€ ì—¬ê¸°ì— ì¹´ë“œë¡œ ë‚˜ì™€ìš”.";
      return;
    }
    empty.style.display = "none";

    filtered.forEach(t=>{
      const card = document.createElement("div");
      card.className="card";
      card.innerHTML = `
        <div style="flex:1">
          <div class="cardTitle">${escapeHtml(t)}</div>
          <div class="cardMeta">${selectedCat ? "ì¹´í…Œê³ ë¦¬: " + escapeHtml(selectedCat) : ""}</div>
        </div>
        <div class="cardBtns">
          <button class="btn small" onclick="setSelected('${escapeAttr(t)}')">ì„ íƒ</button>
          <button class="btn small primary" onclick="copyText('${escapeAttr(t)}')">ë³µì‚¬</button>
        </div>
      `;
      list.appendChild(card);
    });
  }

  function setSelected(t){
    selectedTopic = t;
    updateSel();
    toast("ì„ íƒë¨ âœ…");
  }

  function copyText(t){
    navigator.clipboard.writeText(t);
    toast("ë³µì‚¬ ì™„ë£Œ âœ…");
  }

  function copyAll(){
    if(!topics.length){ toast("ì£¼ì œê°€ ì—†ì–´ìš”"); return; }
    navigator.clipboard.writeText(topics.join("\n"));
    toast("ì „ì²´ ë³µì‚¬ ì™„ë£Œ âœ…");
  }

  // ===== ë°œí–‰ ê¸°ëŠ¥(ìš”ì²­ ì „ì†¡) =====
  // ì‹¤ì œ ìë™ ì—…ë¡œë“œëŠ” server.pyì—ì„œ ì²˜ë¦¬í•˜ê²Œ ë  ì˜ˆì •.
  // ì§€ê¸ˆì€ â€œìš”ì²­ payload ë§Œë“¤ê¸° + ì„œë²„ í˜¸ì¶œâ€ê¹Œì§€ ì„¸íŒ….

  function ensureReady(){
    if(!selectedBlog){
      toast("ë¨¼ì € ë¸”ë¡œê·¸(ë¸”ë¡œê·¸ìŠ¤íŒŸ/ë„¤ì´ë²„/í‹°ìŠ¤í† ë¦¬)ë¥¼ ì„ íƒí•˜ì„¸ìš”!");
      return false;
    }
    if(!selectedTopic){
      toast("ë¨¼ì € ì£¼ì œë¥¼ ì„ íƒí•˜ì„¸ìš”!");
      return false;
    }
    return true;
  }

  // 1) ì˜ˆì•½: 08:00 / 13:00 / 18:00
  async function scheduleFixed3(){
    if(!ensureReady()) return;

    const times = ["08:00","13:00","18:00"];
    const payload = {
      mode: "schedule_fixed_3",
      blog: selectedBlog,
      category: selectedCat,
      topic: selectedTopic,
      schedule_times: times
    };

    document.getElementById("schedulePreview").textContent =
      `ì˜ˆì•½ ìš”ì²­: ${times.join(" / ")}  (ì£¼ì œ: ${selectedTopic})`;

    await postPublishRequest("/api/publish/schedule", payload);
  }

  function previewSchedule(){
    const times = ["08:00","13:00","18:00"];
    document.getElementById("schedulePreview").textContent =
      `ë¯¸ë¦¬ë³´ê¸°: ${times.join(" / ")}  (ì£¼ì œ: ${selectedTopic || "-"})`;
    toast("ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ âœ…");
  }

  // 2) ì¦‰ì‹œ ë°œí–‰: ì‹œì‘ì‹œê°„ + ê°„ê²©(1ì‹œê°„ ë“±)
  async function publishNowWithInterval(){
    if(!ensureReady()) return;

    const start = document.getElementById("startTime").value || "09:00";
    const interval = Number(document.getElementById("intervalHours").value || "1");

    const payload = {
      mode: "publish_now_interval",
      blog: selectedBlog,
      category: selectedCat,
      topic: selectedTopic,
      start_time: start,
      interval_hours: interval
    };

    document.getElementById("nowInfo").textContent =
      `ì¦‰ì‹œ ë°œí–‰ ìš”ì²­: ì‹œì‘ ${start}, ê°„ê²© ${interval}ì‹œê°„ (ì£¼ì œ: ${selectedTopic})`;

    await postPublishRequest("/api/publish/now", payload);
  }

  async function postPublishRequest(path, payload){
    // GitHub Pagesì—ì„œëŠ” ì„œë²„ê°€ ì—†ì–´ì„œ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŒ.
    // ë¡œì»¬(server.py ì¼  ìƒíƒœ)ì—ì„œëŠ” ë™ì‘.
    const base = "http://127.0.0.1:5000";
    try{
      const res = await fetch(base + path, {
        method:"POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify(payload)
      });
      if(!res.ok){
        const t = await res.text();
        toast("ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: " + t);
        return;
      }
      const data = await res.json();
      toast(data.message || "ìš”ì²­ ì „ì†¡ ì™„ë£Œ âœ…");
    }catch(e){
      toast("ì„œë²„ ì—°ê²° ì‹¤íŒ¨ (ë¡œì»¬ ì„œë²„ í•„ìš”) : python server.py");
    }
  }

  // ===== ìœ í‹¸ =====
  function toast(msg){
    const el = document.getElementById("toast");
    el.textContent = msg;
    el.style.display = "block";
    clearTimeout(window.__t);
    window.__t = setTimeout(()=> el.style.display="none", 1400);
  }

  function escapeHtml(s){
    return String(s).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
  }
  function escapeAttr(s){
    return String(s).replaceAll("\\","\\\\").replaceAll("'","\\'");
  }

  render();
</script>
</body>
</html>
