<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BaseOne</title>
  <style>
    :root{
      --bg:#070a12;
      --bg2:#0b1020;

      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.08);
      --line: rgba(255,255,255,.10);
      --text:#eef2ff;
      --muted:rgba(238,242,255,.72);

      --accent:#5f96ff;
      --accent2:#2f6bff;

      --shadow: 0 18px 44px rgba(0,0,0,.55);
      --radius:22px;

      --ok:#39d98a;
      --warn:#ffcf5a;
      --bad:#ff5a6a;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(70,120,255,.16), transparent 60%),
        radial-gradient(900px 620px at 82% 20%, rgba(255,90,170,.07), transparent 55%),
        radial-gradient(1200px 900px at 60% 110%, rgba(50,110,255,.10), transparent 65%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg2) 65%);
      min-height:100vh;
    }
    a{color:var(--accent); text-decoration:none}
    .wrap{max-width:1180px;margin:0 auto;padding:22px 16px 74px}
    .top{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      margin-bottom:14px;
      flex-wrap:wrap;
    }
    .brand{
      display:flex;align-items:center;gap:12px;
      font-weight:900; letter-spacing:.2px;
      font-size:28px;
    }
    .logo{
      width:42px;height:42px;border-radius:14px;
      background:
        radial-gradient(14px 14px at 30% 30%, rgba(255,255,255,.45), transparent 60%),
        linear-gradient(180deg, rgba(95,150,255,1), rgba(47,107,255,1));
      box-shadow: 0 10px 26px rgba(47,107,255,.35);
      border:1px solid rgba(255,255,255,.18);
      flex:0 0 auto;
    }
    .chip{
      font-size:12px;color:var(--muted);
      padding:7px 10px;border:1px solid var(--line);
      border-radius:999px;background:rgba(255,255,255,.04)
    }
    .rightTop{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .btn{
      border:none; cursor:pointer;
      padding:10px 12px;border-radius:14px;
      font-weight:900;
      background:rgba(255,255,255,.06);
      color:var(--text);
      border:1px solid var(--line);
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{border-color: rgba(95,150,255,.35); background: rgba(255,255,255,.075)}
    .btn:active{transform: translateY(1px)}
    .btn.primary{
      background: linear-gradient(180deg, rgba(95,150,255,1), rgba(47,107,255,1));
      border:none;
      box-shadow: 0 12px 30px rgba(47,107,255,.25);
    }
    .btn.primary:hover{filter:brightness(1.05)}
    .btn.ghost{background:rgba(255,255,255,.04)}
    .btn.small{padding:8px 10px;border-radius:12px;font-size:13px}
    .btn.copy{background:rgba(0,0,0,.18)}
    .btn.copy:hover{border-color: rgba(255,255,255,.20)}
    .btn.warn{
      background: linear-gradient(180deg, rgba(255,207,90,.20), rgba(255,207,90,.10));
      border:1px solid rgba(255,207,90,.28);
    }

    .grid{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:980px){.grid{grid-template-columns:1.15fr .85fr}}

    .card{
      background: var(--panel);
      border:1px solid var(--line);
      border-radius: var(--radius);
      padding:16px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }
    .card h2{margin:0 0 10px;font-size:18px}
    .desc{margin:0 0 14px;color:var(--muted);font-size:13px;line-height:1.55}

    /* Category (icon + toned color) */
    .categoryGrid{
      display:grid; grid-template-columns: repeat(2,1fr);
      gap:10px;
    }
    @media(min-width:760px){.categoryGrid{grid-template-columns: repeat(4,1fr)}}
    .cat{
      text-align:left;
      padding:12px 12px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.10));
      font-weight:900;
      transition: transform .08s ease, border-color .2s ease, filter .2s ease;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      position:relative;
      overflow:hidden;
    }
    .cat:hover{transform: translateY(-1px); border-color: rgba(95,150,255,.30); filter: brightness(1.04)}
    .cat .l{display:flex;align-items:center;gap:10px}
    .icon{
      width:34px;height:34px;border-radius:14px;
      display:grid;place-items:center;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.20);
      font-size:18px;
      flex:0 0 auto;
    }
    .cat .name{display:flex;flex-direction:column;gap:2px}
    .cat .name small{font-weight:800;color:var(--muted);font-size:12px}
    .swatch{
      width:10px;height:10px;border-radius:999px;
      box-shadow: 0 0 0 4px rgba(255,255,255,.05);
      flex:0 0 auto;
    }
    .cat::after{
      content:"";
      position:absolute; inset:-90px -70px auto auto;
      width:190px;height:190px;border-radius:999px;
      background: radial-gradient(circle at 30% 30%, var(--glow, rgba(95,150,255,.18)), transparent 60%);
      filter: blur(2px);
      transform: rotate(18deg);
      opacity:.85;
    }

    .two{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:760px){.two{grid-template-columns:1fr 1fr}}

    .box{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius: 18px;
      padding:12px;
    }
    .boxTitle{
      display:flex;justify-content:space-between;align-items:center;gap:10px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }
    .count{font-size:12px;color:var(--muted)}
    .tag{
      font-size:12px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      color:#d6dcff;
      white-space:nowrap;
    }

    .list{
      display:grid; gap:10px;
      max-height: 420px; overflow:auto; padding-right:4px;
    }

    /* Card style items */
    .topicCard{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.16));
      padding:12px;
      display:flex; justify-content:space-between; align-items:flex-start; gap:10px;
    }
    .topicLeft{display:flex;gap:10px;align-items:flex-start}
    .badge{
      width:32px;height:32px;border-radius:14px;
      display:grid;place-items:center;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      font-weight:900;color:#cfd6ff;
      flex:0 0 auto;
    }
    .topicText{display:flex;flex-direction:column;gap:6px}
    .topicTitle{font-size:13px;font-weight:900;line-height:1.35}
    .topicMeta{display:flex;gap:8px;flex-wrap:wrap}
    .pill{
      font-size:12px;
      padding:5px 9px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      color:#d9deff;
    }

    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .row > * {flex: 1 1 auto}
    .row .fixed{flex:0 0 auto}

    select,input{
      width:100%;
      background: rgba(0,0,0,.22);
      color:var(--text);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      padding:11px 12px;
      outline:none;
    }
    input::placeholder{color: rgba(238,242,255,.55)}
    .divider{height:1px;background: rgba(255,255,255,.08); margin:14px 0}

    .toast{
      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
      background:rgba(0,0,0,.62);backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.10);
      padding:10px 12px;border-radius:14px;
      color:var(--text);font-size:13px;display:none;
      max-width: 92vw;
      box-shadow: 0 14px 30px rgba(0,0,0,.35);
      z-index:50;
    }

    /* Modal */
    .modalOverlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.62);
      display:none;
      align-items:center; justify-content:center;
      padding:18px;
      z-index:60;
    }
    .modal{
      width:min(860px, 96vw);
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.04));
      box-shadow: 0 24px 70px rgba(0,0,0,.60);
      backdrop-filter: blur(14px);
      padding:16px;
    }
    .modalTop{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }
    .modalTitle{font-size:18px;font-weight:900}
    .modalClose{border:1px solid rgba(255,255,255,.14); background:rgba(0,0,0,.18)}
    .modalGrid{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:760px){.modalGrid{grid-template-columns:1fr 1fr}}
    .modalBox{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      border-radius: 18px;
      padding:12px;
    }
    .modalActions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;justify-content:flex-end}
    .tiny{font-size:12px;color:var(--muted);line-height:1.55}
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      padding:3px 6px;border-radius:8px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color:#d6dcff;
    }

    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{
      padding:8px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      font-weight:900;
      font-size:13px;
      cursor:pointer;
    }
    .tab.active{
      border-color: rgba(95,150,255,.35);
      background: rgba(95,150,255,.12);
    }

    .timePills{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .timePill{
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      font-size:12px;
      color:#d9deff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo"></div>
        <div>
          BaseOne
          <div style="margin-top:6px">
            <span class="chip">ì¹´ë“œí˜• Â· ë³µì‚¬ Â· ì˜ˆì•½/ë°”ë¡œë°œí–‰</span>
            <span class="chip" id="pickedInfo">ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</span>
          </div>
        </div>
      </div>

      <div class="rightTop">
        <a class="btn" href="./settings.html">âš™ ì„¤ì •</a>
        <button class="btn warn" onclick="openInstant()">âš¡ ë°”ë¡œ ë°œí–‰</button>
        <button class="btn primary" onclick="openPlanner()">ğŸ“… ì˜ˆì•½ ë°œí–‰</button>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT -->
      <div class="card">
        <h2>ì¹´í…Œê³ ë¦¬</h2>
        <p class="desc">ì¹´í…Œê³ ë¦¬ë¥¼ ëˆ„ë¥´ë©´ <b>ì£¼ì œ 50ê°œ</b> + <b>ì¹´í…Œê³ ë¦¬ ë§ì¶¤ ìˆ˜ìµí˜• ì£¼ì œ</b>ë¥¼ ìƒì„±í•´ìš”.</p>

        <div class="categoryGrid" id="cats"></div>

        <div class="divider"></div>

        <div class="two">
          <div class="box">
            <div class="boxTitle">
              <b>ì£¼ì œ 50ê°œ</b>
              <span class="count" id="topicCount">0ê°œ</span>
            </div>
            <div class="row" style="margin-bottom:10px">
              <input id="topicSearch" placeholder="ì£¼ì œ ê²€ìƒ‰ (ì˜ˆ: ë³´í—˜, ë‹¤ì´ì–´íŠ¸, ìë™ì°¨, ìê²©ì¦)"/>
              <button class="btn small ghost fixed" onclick="clearTopicSearch()">ì´ˆê¸°í™”</button>
            </div>
            <div class="list" id="topics"></div>
          </div>

          <div class="box">
            <div class="boxTitle">
              <b>ìˆ˜ìµí˜• ì£¼ì œ 100ê°œ (ì¹´í…Œê³ ë¦¬ ìë™ì¶”ì²œ)</b>
              <span class="count" id="profitCount">0ê°œ</span>
            </div>
            <div class="row" style="margin-bottom:10px">
              <input id="profitSearch" placeholder="ìˆ˜ìµí˜• ì£¼ì œ ê²€ìƒ‰ (ì˜ˆ: ëŒ€ì¶œ, ì¹´ë“œ, ì˜ì–‘ì œ, ê°€ì „)"/>
              <button class="btn small ghost fixed" onclick="clearProfitSearch()">ì´ˆê¸°í™”</button>
            </div>

            <div class="row" style="margin-bottom:10px">
              <button class="btn primary" onclick="makeProfit()">ìˆ˜ìµí˜• ì£¼ì œ ìƒì„±</button>
              <button class="btn ghost" onclick="clearProfit()">ë¹„ìš°ê¸°</button>
            </div>

            <div class="list" id="profit"></div>
          </div>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="card">
        <h2>ë°œí–‰</h2>
        <p class="desc">
          ì˜ˆì•½ ë°œí–‰: <b>í•˜ë£¨ 3ê°œ = 09:00 / 14:00 / 19:00</b> ìë™ ì ìš©  
          <br/>ë°”ë¡œ ë°œí–‰: ì‹œê°„/ì£¼ì œë¥¼ ì§ì ‘ ì •í•˜ê³  <b>ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê¸°</b>ë„ ê°€ëŠ¥
        </p>

        <div class="box">
          <div class="row">
            <button class="btn warn" onclick="openInstant()">âš¡ ë°”ë¡œ ë°œí–‰</button>
            <button class="btn primary" onclick="openPlanner()">ğŸ“… ì˜ˆì•½ ë°œí–‰</button>
          </div>
          <div class="tiny" style="margin-top:10px">
            íŒ: ì¹´ë“œì˜ <span class="kbd">ë³µì‚¬</span> ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì£¼ì œê°€ í´ë¦½ë³´ë“œë¡œ ë³µì‚¬ë¼ìš”.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ì˜ˆì•½ ë°œí–‰ Modal -->
  <div class="modalOverlay" id="modalOverlay" onclick="closeIfOutside(event)">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalTop">
        <div>
          <div class="modalTitle">ğŸ“… ì˜ˆì•½ ë°œí–‰</div>
          <div class="tiny">ì§€ê¸ˆì€ â€œì˜ˆì•½ ì €ì¥â€ê¹Œì§€ë§Œ (ìë™ ë°œí–‰ì€ ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì„œë²„ ì—°ê²°)</div>
        </div>
        <div class="tabs">
          <div class="tab active" id="tabSchedule" onclick="switchPlannerTab('schedule')">ì˜ˆì•½</div>
          <div class="tab" id="tabPreview" onclick="switchPlannerTab('preview')">ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°</div>
          <button class="btn small modalClose" onclick="closePlanner()">ë‹«ê¸°</button>
        </div>
      </div>

      <div id="plannerSchedule">
        <div class="modalGrid">
          <div class="modalBox">
            <div style="font-weight:900;margin-bottom:8px">ë°œí–‰í•  ë¸”ë¡œê·¸ ì„ íƒ</div>
            <select id="blogSelect"></select>
            <div class="tiny" style="margin-top:8px">
              ì„¤ì •(settings.html)ì—ì„œ ë¸”ë¡œê·¸ë¥¼ ì €ì¥í•´ë‘ë©´ ì—¬ê¸°ì— í‘œì‹œë¼ìš”.
            </div>
          </div>

          <div class="modalBox">
            <div style="font-weight:900;margin-bottom:8px">í•˜ë£¨ ë°œí–‰ ê°œìˆ˜</div>
            <input id="dailyCount" type="number" min="1" value="3" oninput="updateTimePreview()"/>
            <div class="tiny" style="margin-top:8px">
              í•˜ë£¨ 3ê°œë©´ ìë™ìœ¼ë¡œ <b>09:00 / 14:00 / 19:00</b> ì„¤ì •ë©ë‹ˆë‹¤.
            </div>
          </div>

          <div class="modalBox" style="grid-column:1 / -1">
            <div style="font-weight:900;margin-bottom:8px">ì˜ˆì•½ ìƒíƒœ</div>
            <div class="tiny" id="planView">ì €ì¥ëœ ì˜ˆì•½ì´ ì—†ì–´ìš”.</div>
          </div>
        </div>

        <div class="modalActions">
          <button class="btn ghost" onclick="clearSchedule()">ì˜ˆì•½ ì‚­ì œ</button>
          <button class="btn" onclick="viewSchedule()">ì˜ˆì•½ ë³´ê¸°</button>
          <button class="btn primary" onclick="saveSchedule()">ì˜ˆì•½ ì €ì¥</button>
        </div>
      </div>

      <div id="plannerPreview" style="display:none">
        <div class="modalBox">
          <div style="font-weight:900;margin-bottom:8px">ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°</div>
          <div class="tiny">í•˜ë£¨ ë°œí–‰ ê°œìˆ˜ì— ë”°ë¼ ì‹œê°„ì„ ìë™ ë°°ì¹˜í•´ìš”.</div>
          <div class="timePills" id="timePreview"></div>
        </div>

        <div class="modalActions">
          <button class="btn" onclick="updateTimePreview()">ìƒˆë¡œê³ ì¹¨</button>
          <button class="btn primary" onclick="switchPlannerTab('schedule')">ì˜ˆì•½ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ë°”ë¡œ ë°œí–‰ Modal -->
  <div class="modalOverlay" id="instantOverlay" onclick="closeInstantIfOutside(event)">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalTop">
        <div>
          <div class="modalTitle">âš¡ ë°”ë¡œ ë°œí–‰ (ë³µì‚¬/ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥)</div>
          <div class="tiny">í˜„ì¬ëŠ” â€œë°œí–‰ ë°ì´í„° ìƒì„±/ë³µì‚¬â€ê¹Œì§€. ì‹¤ì œ ë°œí–‰ API ì—°ê²°ì€ ë‹¤ìŒ ë‹¨ê³„.</div>
        </div>
        <button class="btn small modalClose" onclick="closeInstant()">ë‹«ê¸°</button>
      </div>

      <div class="modalGrid">
        <div class="modalBox">
          <div style="font-weight:900;margin-bottom:8px">ë¸”ë¡œê·¸ ì„ íƒ</div>
          <select id="instantBlogSelect"></select>
        </div>

        <div class="modalBox">
          <div style="font-weight:900;margin-bottom:8px">ë°œí–‰ ì‹œê°„</div>
          <input id="instantTime" type="time" value="09:00"/>
          <div class="tiny" style="margin-top:8px">ì›í•˜ëŠ” ì‹œê°„ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”.</div>
        </div>

        <div class="modalBox" style="grid-column:1 / -1">
          <div style="font-weight:900;margin-bottom:8px">ì£¼ì œ ì„ íƒ</div>
          <div class="row" style="margin-bottom:10px">
            <input id="instantSearch" placeholder="ì£¼ì œ ê²€ìƒ‰í•´ì„œ ì•„ë˜ì—ì„œ í´ë¦­í•˜ê±°ë‚˜, ì§ì ‘ ì…ë ¥í•´ë„ ë¼ìš”"/>
            <button class="btn small ghost fixed" onclick="fillInstantFromSelected()">ì„ íƒ ì£¼ì œë¡œ ì±„ìš°ê¸°</button>
          </div>
          <input id="instantTopic" placeholder="ì—¬ê¸°ì— ì£¼ì œë¥¼ ì§ì ‘ ì…ë ¥í•  ìˆ˜ ìˆì–´ìš” (ì˜ˆ: ë³´í—˜ë£Œ ì¤„ì´ëŠ” ë°©ë²•)"/>
          <div class="tiny" style="margin-top:8px">
            ì•„ë˜ ëª©ë¡ì—ì„œ ì£¼ì œë¥¼ í´ë¦­í•˜ë©´ â€œì„ íƒ ì£¼ì œâ€ê°€ ë©ë‹ˆë‹¤.
          </div>
        </div>

        <div class="modalBox" style="grid-column:1 / -1">
          <div style="font-weight:900;margin-bottom:8px">ì£¼ì œ ëª©ë¡ (í´ë¦­í•´ì„œ ì„ íƒ)</div>
          <div class="list" id="instantList" style="max-height:260px"></div>
        </div>

        <div class="modalBox" style="grid-column:1 / -1">
          <div style="font-weight:900;margin-bottom:8px">ë°œí–‰ ë°ì´í„° (ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê¸°)</div>
          <div class="tiny" id="instantPayload">ì•„ì§ ìƒì„± ì „ì…ë‹ˆë‹¤.</div>
        </div>
      </div>

      <div class="modalActions">
        <button class="btn" onclick="buildInstantPayload()">ë°œí–‰ ë°ì´í„° ë§Œë“¤ê¸°</button>
        <button class="btn ghost" onclick="copyInstantPayload()">ë°ì´í„° ë³µì‚¬</button>
        <button class="btn primary" onclick="saveInstantDraft()">ì„ì‹œ ì €ì¥</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

<script>
  // ---------- Toast ----------
  function toast(msg){
    const t=document.getElementById("toast");
    t.textContent=msg;
    t.style.display="block";
    clearTimeout(window.__t);
    window.__t=setTimeout(()=>t.style.display="none", 2200);
  }

  // ---------- Categories (toned, not pastel) ----------
  const CATEGORY_META = [
    {name:"ê±´ê°•", icon:"ğŸ’ª", sub:"ëª¸/ê±´ê°•", glow:"rgba(57,217,138,.12)", dot:"#39d98a"},
    {name:"ì»´í“¨í„°/IT", icon:"ğŸ’»", sub:"ê¸°ìˆ /ë„êµ¬", glow:"rgba(95,150,255,.12)", dot:"#5f96ff"},
    {name:"ìë™ì°¨", icon:"ğŸš—", sub:"ì •ë¹„/ë³´í—˜", glow:"rgba(255,168,76,.10)", dot:"#ffa84c"},
    {name:"ìƒí™œ/ê°€ì „", icon:"ğŸ ", sub:"ì‚´ë¦¼/ê°€ì „", glow:"rgba(174,120,255,.10)", dot:"#ae78ff"},
    {name:"ìœ¡ì•„", icon:"ğŸ‘¶", sub:"ìœ¡ì•„/êµìœ¡", glow:"rgba(255,102,196,.08)", dot:"#ff66c4"},
    {name:"ëˆ/ì¬í…Œí¬", icon:"ğŸ’¸", sub:"ì ˆì•½/íˆ¬ì", glow:"rgba(47,107,255,.12)", dot:"#2f6bff"},
    {name:"ì—¬í–‰", icon:"âœˆï¸", sub:"ì½”ìŠ¤/íŒ", glow:"rgba(80,220,255,.08)", dot:"#50dcff"},
    {name:"ìš”ë¦¬", icon:"ğŸ³", sub:"ë ˆì‹œí”¼", glow:"rgba(255,220,80,.08)", dot:"#ffdc50"},
    {name:"ìê¸°ê³„ë°œ", icon:"ğŸ“ˆ", sub:"ìŠµê´€/ëª©í‘œ", glow:"rgba(140,255,190,.07)", dot:"#8cffbe"},
    {name:"ê³µë¶€/ìê²©ì¦", icon:"ğŸ“š", sub:"ì‹œí—˜/ë£¨í‹´", glow:"rgba(255,170,200,.07)", dot:"#ffaaC8"},
    {name:"ë°˜ë ¤ë™ë¬¼", icon:"ğŸ¶", sub:"ì¼€ì–´/ìš©í’ˆ", glow:"rgba(180,255,120,.07)", dot:"#b4ff78"},
    {name:"íŒ¨ì…˜/ë·°í‹°", icon:"ğŸ’„", sub:"ê´€ë¦¬/í…œ", glow:"rgba(255,120,150,.07)", dot:"#ff7896"},
    {name:"ì·¨ë¯¸", icon:"ğŸ¨", sub:"ì·¨ë¯¸/DIY", glow:"rgba(160,200,255,.07)", dot:"#a0c8ff"},
    {name:"ìŠ¤í¬ì¸ ", icon:"âš½", sub:"ìš´ë™/ë£¨í‹´", glow:"rgba(120,255,220,.07)", dot:"#78ffdc"},
    {name:"ê²Œì„", icon:"ğŸ®", sub:"ë¦¬ë·°/íŒ", glow:"rgba(200,160,255,.07)", dot:"#c8a0ff"},
    {name:"ì˜í™”/ë“œë¼ë§ˆ", icon:"ğŸ¬", sub:"ì¶”ì²œ/ë¦¬ë·°", glow:"rgba(255,200,140,.07)", dot:"#ffc88c"},
  ];

  let CURRENT_CATEGORY = "";
  let TOPIC_ITEMS = [];   // {title, category, type}
  let PROFIT_ITEMS = [];  // {title, category, type}

  const catsEl=document.getElementById("cats");
  CATEGORY_META.forEach((c)=>{
    const b=document.createElement("button");
    b.className="cat";
    b.style.setProperty("--glow", c.glow);
    b.innerHTML = `
      <div class="l">
        <div class="icon">${c.icon}</div>
        <div class="name">
          <div>${c.name}</div>
          <small>${c.sub}</small>
        </div>
      </div>
      <div class="swatch" style="background:${c.dot}"></div>
    `;
    b.onclick=()=>{
      CURRENT_CATEGORY = c.name;
      document.getElementById("pickedInfo").textContent = `ì„ íƒë¨: ${c.name}`;
      makeTopics(c.name);
      makeProfit(c.name); // ì¹´í…Œê³ ë¦¬ë³„ ìë™ì¶”ì²œ
      rebuildInstantList(); // ë°”ë¡œë°œí–‰ ëª©ë¡ ì—…ë°ì´íŠ¸
    };
    catsEl.appendChild(b);
  });

  // ---------- Copy helper ----------
  async function copyText(text){
    try{
      await navigator.clipboard.writeText(text);
      toast("âœ… ë³µì‚¬ ì™„ë£Œ!");
    }catch(e){
      const ta=document.createElement("textarea");
      ta.value=text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      toast("âœ… ë³µì‚¬ ì™„ë£Œ!");
    }
  }

  // ---------- Topic & Profit card render ----------
  function topicCardHTML(item, idx){
    const title = item.title;
    const cat = item.category || "";
    const type = item.type || "";
    return `
      <div class="topicCard">
        <div class="topicLeft">
          <div class="badge">${idx+1}</div>
          <div class="topicText">
            <div class="topicTitle">${escapeHtml(title)}</div>
            <div class="topicMeta">
              ${cat ? `<span class="pill">${escapeHtml(cat)}</span>` : ``}
              ${type ? `<span class="pill">${escapeHtml(type)}</span>` : ``}
            </div>
          </div>
        </div>
        <button class="btn small copy" onclick="copyText('${escapeJs(title)}')">ë³µì‚¬</button>
      </div>
    `;
  }

  // ---------- Topics (50) ----------
  function makeTopics(category){
    TOPIC_ITEMS = [];
    for(let i=1;i<=50;i++){
      TOPIC_ITEMS.push({
        title: `${category} ê¸€ ì•„ì´ë””ì–´ ${i}`,
        category,
        type: "ì£¼ì œ"
      });
    }
    document.getElementById("topicCount").textContent="50ê°œ";
    document.getElementById("topicSearch").value="";
    renderTopics();
    toast(`${category} ì£¼ì œ 50ê°œ ìƒì„±!`);
  }

  function renderTopics(){
    const q = document.getElementById("topicSearch").value.trim().toLowerCase();
    const list = document.getElementById("topics");
    list.innerHTML = "";
    const filtered = TOPIC_ITEMS.filter(it => !q || it.title.toLowerCase().includes(q));
    filtered.forEach((it, idx)=> list.insertAdjacentHTML("beforeend", topicCardHTML(it, idx)));
    document.getElementById("topicCount").textContent = `${filtered.length}ê°œ`;
  }

  document.getElementById("topicSearch").addEventListener("input", renderTopics);
  function clearTopicSearch(){ document.getElementById("topicSearch").value=""; renderTopics(); }

  // ---------- Profit topics (category auto recommendation) ----------
  const PROFIT_BANK = {
    "ê±´ê°•": [
      "ì˜ì–‘ì œ ë¹„êµ", "ë‹¤ì´ì–´íŠ¸ ì‹ë‹¨", "í™ˆíŠ¸ ë£¨í‹´", "íƒˆëª¨ ê´€ë¦¬", "í”¼ë¶€ íŠ¸ëŸ¬ë¸” ì¼€ì–´", "ìˆ˜ë©´ ê°œì„ ", "ê±´ê°•ê²€ì§„ í•­ëª©",
      "í˜ˆë‹¹ ê´€ë¦¬", "ê´€ì ˆ ê±´ê°•", "ë©´ì—­ë ¥ ê´€ë¦¬", "ë¹„íƒ€ë¯¼ ì¶”ì²œ", "ì˜¤ë©”ê°€3 ë¹„êµ"
    ],
    "ì»´í“¨í„°/IT": [
      "ë…¸íŠ¸ë¶ ê°€ì„±ë¹„", "ê³µìœ ê¸° ì¶”ì²œ", "ìœˆë„ìš° ìµœì í™”", "ë°±ì—…/ë³µêµ¬", "ë³´ì•ˆ/ë¹„ë°€ë²ˆí˜¸", "í‚¤ë³´ë“œ/ë§ˆìš°ìŠ¤", "í´ë¼ìš°ë“œ ì €ì¥",
      "NAS", "ì¸ê³µì§€ëŠ¥ íˆ´", "ì—…ë¬´ ìë™í™”", "í”„ë¦°í„° ë¬¸ì œ", "ëª¨ë‹ˆí„° ì¶”ì²œ"
    ],
    "ìë™ì°¨": [
      "ìë™ì°¨ ë³´í—˜ ë¹„êµ", "ë¸”ë™ë°•ìŠ¤ ì¶”ì²œ", "ì—”ì§„ì˜¤ì¼ êµì²´", "íƒ€ì´ì–´ êµì²´", "ì—°ë¹„ ì ˆì•½", "ì¤‘ê³ ì°¨ ì²´í¬", "ì •ë¹„ì†Œ ì„ íƒ",
      "ì‚¬ê³  ì²˜ë¦¬", "ìë™ì°¨ì„¸", "í•˜ì´íŒ¨ìŠ¤", "ì„¸ì°¨ ìš©í’ˆ", "ì°¨ëŸ‰ìš©í’ˆ ì¶”ì²œ"
    ],
    "ìƒí™œ/ê°€ì „": [
      "ì²­ì†Œê¸° ì¶”ì²œ", "ê³µê¸°ì²­ì •ê¸°", "ì œìŠµê¸°", "ì„¸íƒê¸° ê´€ë¦¬", "ëƒ‰ì¥ê³  ì •ë¦¬", "ì „ê¸°ìš”ê¸ˆ ì ˆì•½", "ì£¼ë°©ê°€ì „", "ì‚´ë¦¼íŒ",
      "ì •ë¦¬ìˆ˜ë‚©", "í•„í„° êµì²´", "ë§¤íŠ¸ë¦¬ìŠ¤ ê´€ë¦¬", "ìƒí™œìš©í’ˆ ì¶”ì²œ"
    ],
    "ìœ¡ì•„": [
      "ê¸°ì €ê·€ ì¶”ì²œ", "ë¶„ìœ  ë¹„êµ", "ì´ìœ ì‹", "ìœ¡ì•„í…œ í•„ìˆ˜", "ì•„ê¸° ìˆ˜ë©´", "ê°ê¸° ëŒ€ì²˜", "ì•„ì´ êµìœ¡", "ì¥ë‚œê° ì¶”ì²œ",
      "ìœ ì•„ì‹ ë ˆì‹œí”¼", "ìœ¡ì•„ ë¹„ìš©", "ì–´ë¦°ì´ë³´í—˜", "ì•„ê¸° í”¼ë¶€"
    ],
    "ëˆ/ì¬í…Œí¬": [
      "ì¹´ë“œ í˜œíƒ", "í†µì‹ ë¹„ ì ˆì•½", "ë³´í—˜ ë¦¬ëª¨ë¸ë§", "ëŒ€ì¶œ ìƒì‹", "ISA/IRP", "ì„¸ê¸ˆ í™˜ê¸‰", "ì ˆì•½ ë£¨í‹´", "ë¶€ì—…",
      "ì—°ê¸ˆ", "ì‹ ìš©ì ìˆ˜", "ìë™ì°¨ë³´í—˜", "ê°€ê³„ë¶€"
    ],
    "ì—¬í–‰": [
      "í•­ê³µê¶Œ íŠ¹ê°€", "ìˆ™ì†Œ í• ì¸", "ì—¬í–‰ìë³´í—˜", "ë Œí„°ì¹´", "í™˜ì „/ì¹´ë“œ", "ì¼ì • ì½”ìŠ¤", "ì§ì‹¸ê¸°", "ì—¬í–‰ í•„ìˆ˜í…œ",
      "ê°€ì„±ë¹„ ë§›ì§‘", "í•´ì™¸ ìœ ì‹¬", "ì—¬í–‰ ê²½ë¹„", "íŒ¨í‚¤ì§€ ë¹„êµ"
    ],
    "ìš”ë¦¬": [
      "ì—ì–´í”„ë¼ì´ì–´ ë ˆì‹œí”¼", "ë‹¤ì´ì–´íŠ¸ ë„ì‹œë½", "ë°€í”„ë ™", "ê°„í¸ì‹ ì¶”ì²œ", "ì–‘ë…ì¥", "í•œë¼ ë ˆì‹œí”¼", "ë°˜ì°¬ ë§Œë“¤ê¸°",
      "ëƒ‰ì¥ê³  íŒŒë¨¹ê¸°", "ì‹ì¬ë£Œ ë³´ê´€", "ì£¼ë°©ë„êµ¬ ì¶”ì²œ", "ì»¤í”¼/ë¨¸ì‹ ", "ê±´ê°•ì‹"
    ],
    "ìê¸°ê³„ë°œ": [
      "ì‹œê°„ê´€ë¦¬", "ë…ì„œ ë£¨í‹´", "ë¶€ì—… ì¤€ë¹„", "ìê²©ì¦ ê³„íš", "ìŠµê´€ ë§Œë“¤ê¸°", "ëª©í‘œ ì„¤ì •", "ë¯¸ë¼í´ëª¨ë‹", "ìƒì‚°ì„± ì•±",
      "ë©˜íƒˆ ê´€ë¦¬", "ì»¤ë¦¬ì–´", "í¬íŠ¸í´ë¦¬ì˜¤", "ë©´ì ‘ ì¤€ë¹„"
    ],
    "ê³µë¶€/ìê²©ì¦": [
      "ìê²©ì¦ ì¶”ì²œ", "ê³µë¶€ ë£¨í‹´", "ì•”ê¸°ë²•", "ê¸°ì¶œ ë¶„ì„", "ì‹œí—˜ ì¼ì •", "ê³µë¶€ ë„êµ¬", "ì§‘ì¤‘ë ¥", "ì˜¤ë‹µë…¸íŠ¸",
      "ì˜ì–´ ê³µë¶€", "í•œêµ­ì‚¬", "ì»´í™œ", "ìš´ì „ë©´í—ˆ"
    ],
    "ë°˜ë ¤ë™ë¬¼": [
      "ì‚¬ë£Œ ì¶”ì²œ", "ê°„ì‹ ì¶”ì²œ", "í”¼ë¶€/ê·€ ê´€ë¦¬", "í„¸ ê´€ë¦¬", "ë°°ë³€ í›ˆë ¨", "ë³‘ì›ë¹„", "ë³´í—˜", "ì¥ë‚œê°",
      "ì‚°ì±… ìš©í’ˆ", "ê³ ì–‘ì´ ëª¨ë˜", "ê°•ì•„ì§€ ìƒ´í‘¸", "ì˜ì–‘ì œ"
    ],
    "íŒ¨ì…˜/ë·°í‹°": [
      "ê¸°ì´ˆ ìŠ¤í‚¨ì¼€ì–´", "ì„ í¬ë¦¼ ë¹„êµ", "ì—¬ë“œë¦„ ì¼€ì–´", "í–¥ìˆ˜ ì¶”ì²œ", "í—¤ì–´ì¼€ì–´", "ë‹¤ì´ì–´íŠ¸ í•", "ê°€ì„±ë¹„ í™”ì¥í’ˆ",
      "í”¼ë¶€ íƒ€ì…", "ë·°í‹°ê¸°ê¸°", "ì†ëˆˆì¹", "ë‚¨ì ê·¸ë£¨ë°", "í¼ìŠ¤ë„ì»¬ëŸ¬"
    ],
    "ì·¨ë¯¸": [
      "ì‚¬ì§„ ë³´ì •", "ìº˜ë¦¬ê·¸ë¼í”¼", "ê·¸ë¦¼", "DIY", "ë² ì´í‚¹", "í™ˆì¹´í˜", "ì•…ê¸°", "ë“œë¡œì‰",
      "ìº í•‘", "ë‚šì‹œ", "ìì „ê±°", "ì·¨ë¯¸ìš©í’ˆ"
    ],
    "ìŠ¤í¬ì¸ ": [
      "ëŸ¬ë‹í™” ì¶”ì²œ", "í—¬ìŠ¤ ë£¨í‹´", "ë‹¤ì´ì–´íŠ¸ ìš´ë™", "ìŠ¤íŠ¸ë ˆì¹­", "ë‹¨ë°±ì§ˆ", "í™ˆíŠ¸ ê¸°êµ¬", "ì²´í˜• êµì •", "ë¶€ìƒ ë°©ì§€",
      "ê³¨í”„ ì¥ë¹„", "ìš”ê°€", "í•„ë¼í…ŒìŠ¤", "ìŠ¤í¬ì¸ ìš©í’ˆ"
    ],
    "ê²Œì„": [
      "ê²Œì´ë° ë§ˆìš°ìŠ¤", "ê²Œì´ë° í‚¤ë³´ë“œ", "ì˜ì ì¶”ì²œ", "ëª¨ë‹ˆí„°", "ê·¸ë˜í”½ì¹´ë“œ", "ê²Œì„ ì¶”ì²œ", "ì„¸íŒ… íŒ", "êµ¬ë…/íŒ¨ìŠ¤",
      "ìŠ¤íŠ¸ë¦¬ë°", "í—¤ë“œì…‹", "ì½˜ì†”", "PCë°©"
    ],
    "ì˜í™”/ë“œë¼ë§ˆ": [
      "OTT ì¶”ì²œ", "êµ¬ë… ë¹„êµ", "ì‘í’ˆ ì¶”ì²œ", "ì¥ë¥´ë³„ ì¶”ì²œ", "ëª°ì•„ë³´ê¸°", "í•´ì„/ë¦¬ë·°", "ë°°ìš° ì •ë³´", "ëª…ëŒ€ì‚¬",
      "ì‹¤í™” ê¸°ë°˜", "í•œêµ­ ë“œë¼ë§ˆ", "ë¯¸ë“œ", "ì˜í™” ì¶”ì²œ"
    ]
  };

  function makeProfit(category = CURRENT_CATEGORY){
    const profit=document.getElementById("profit");
    PROFIT_ITEMS = [];

    // ì¹´í…Œê³ ë¦¬ ë¯¸ì„ íƒì´ë©´ ê¸°ë³¸ bank ì‚¬ìš©
    const baseList = (category && PROFIT_BANK[category]) ? PROFIT_BANK[category] : [
      "ë³´í—˜ ë¹„êµ", "ì¹´ë“œ í˜œíƒ ìµœì í™”", "í†µì‹ ë¹„ ì ˆì•½", "ì „ê¸°ìš”ê¸ˆ ì ˆì•½",
      "ì •ë¶€ì§€ì›ê¸ˆ/ë³µì§€", "ì—°ê¸ˆ(IRP/ISA)", "ëŒ€ì¶œ ìƒì‹", "ë¶€ì—…/ì¬íƒ", "ì„¸ê¸ˆ/í™˜ê¸‰",
      "ë‹¤ì´ì–´íŠ¸/ê±´ê°•ê¸°ëŠ¥ì‹í’ˆ", "ê°€ì „ ì¶”ì²œ", "ìë™ì°¨ ë³´í—˜/ì •ë¹„", "ì—¬í–‰ í• ì¸/íŠ¹ê°€",
      "ìê²©ì¦/ì‹œí—˜", "ë…¸íŠ¸ë¶/ê°€ì„±ë¹„", "ì²­ì†Œ/ì‚´ë¦¼íŒ", "ì´ì‚¬/ì •ë¦¬", "íœ´ëŒ€í°/ìš”ê¸ˆì œ"
    ];

    for(let i=1;i<=100;i++){
      const base = baseList[i % baseList.length];
      const title = category
        ? `ìˆ˜ìµí˜• ì£¼ì œ ${i}: (${category}) ${base}`
        : `ìˆ˜ìµí˜• ì£¼ì œ ${i}: ${base}`;

      PROFIT_ITEMS.push({
        title,
        category: category || "",
        type:"ìˆ˜ìµí˜•"
      });
    }

    document.getElementById("profitCount").textContent="100ê°œ";
    document.getElementById("profitSearch").value="";
    renderProfit();
    toast(category ? `${category} ë§ì¶¤ ìˆ˜ìµí˜• 100ê°œ ìƒì„±!` : "ìˆ˜ìµí˜• 100ê°œ ìƒì„±!");
  }

  function renderProfit(){
    const q = document.getElementById("profitSearch").value.trim().toLowerCase();
    const list = document.getElementById("profit");
    list.innerHTML = "";
    const filtered = PROFIT_ITEMS.filter(it => !q || it.title.toLowerCase().includes(q));
    filtered.forEach((it, idx)=> list.insertAdjacentHTML("beforeend", topicCardHTML(it, idx)));
    document.getElementById("profitCount").textContent = `${filtered.length}ê°œ`;
  }

  document.getElementById("profitSearch").addEventListener("input", renderProfit);
  function clearProfitSearch(){ document.getElementById("profitSearch").value=""; renderProfit(); }

  function clearProfit(){
    PROFIT_ITEMS = [];
    document.getElementById("profit").innerHTML="";
    document.getElementById("profitCount").textContent="0ê°œ";
  }

  // ---------- Planner modal (ì˜ˆì•½) ----------
  const overlay = document.getElementById("modalOverlay");
  function openPlanner(){
    overlay.style.display="flex";
    loadBlogsToSelect();
    refreshPlanView();
    updateTimePreview();
    switchPlannerTab("schedule");
  }
  function closePlanner(){ overlay.style.display="none"; }
  function closeIfOutside(e){ if(e.target === overlay) closePlanner(); }
  window.addEventListener("keydown", (e)=>{
    if(e.key === "Escape"){
      if(overlay.style.display === "flex") closePlanner();
      if(document.getElementById("instantOverlay").style.display === "flex") closeInstant();
    }
  });

  function switchPlannerTab(tab){
    const sch = document.getElementById("plannerSchedule");
    const pre = document.getElementById("plannerPreview");
    const t1 = document.getElementById("tabSchedule");
    const t2 = document.getElementById("tabPreview");

    if(tab==="preview"){
      sch.style.display="none";
      pre.style.display="block";
      t1.classList.remove("active");
      t2.classList.add("active");
      updateTimePreview();
    }else{
      sch.style.display="block";
      pre.style.display="none";
      t2.classList.remove("active");
      t1.classList.add("active");
    }
  }

  // ìë™ ì‹œê°„ ìƒì„±: 3ê°œë©´ 09:00/14:00/19:00 ê³ ì •. ê·¸ ì™¸ëŠ” 09~21 ê· ë“± ë¶„ë°°
  function buildTimes(n){
    n = Math.max(1, parseInt(n||"3",10));
    if(n===3) return ["09:00","14:00","19:00"];

    const start = 9*60;   // 09:00
    const end   = 21*60;  // 21:00
    const span = end - start;
    const step = span / (n-1 || 1);

    const times = [];
    for(let i=0;i<n;i++){
      const m = Math.round(start + step*i);
      const hh = String(Math.floor(m/60)).padStart(2,"0");
      const mm = String(m%60).padStart(2,"0");
      times.push(`${hh}:${mm}`);
    }
    return times;
  }

  function updateTimePreview(){
    const n = document.getElementById("dailyCount").value;
    const pills = document.getElementById("timePreview");
    pills.innerHTML="";
    buildTimes(n).forEach(t=>{
      const el=document.createElement("div");
      el.className="timePill";
      el.textContent=t;
      pills.appendChild(el);
    });
  }

  // ---------- Blogs list from settings ----------
  function loadBlogsToSelect(){
    const blogs = JSON.parse(localStorage.getItem("baseone.blogs")||"[]");

    const sel=document.getElementById("blogSelect");
    const sel2=document.getElementById("instantBlogSelect");
    sel.innerHTML="";
    sel2.innerHTML="";

    if(!blogs.length){
      const opt=document.createElement("option");
      opt.value="";
      opt.textContent="ì„¤ì •ì—ì„œ ë¸”ë¡œê·¸ë¥¼ ë¨¼ì € ì €ì¥í•˜ì„¸ìš”";
      sel.appendChild(opt);

      const opt2=opt.cloneNode(true);
      sel2.appendChild(opt2);
      return;
    }

    blogs.forEach((b, idx)=>{
      const type = (b.type||"").toUpperCase();
      const name = b.name ? b.name : "ì´ë¦„ì—†ìŒ";
      const text = `${type} Â· ${name} Â· ${b.url}`;

      const o1=document.createElement("option");
      o1.value=idx;
      o1.textContent=text;
      sel.appendChild(o1);

      const o2=document.createElement("option");
      o2.value=idx;
      o2.textContent=text;
      sel2.appendChild(o2);
    });
  }

  // ---------- Schedule save ----------
  const LS_PLAN="baseone.plan.v3";
  function saveSchedule(){
    const blogs = JSON.parse(localStorage.getItem("baseone.blogs")||"[]");
    const selIdx = document.getElementById("blogSelect").value;
    const daily = parseInt(document.getElementById("dailyCount").value || "3", 10);

    if(!blogs.length){ toast("ì„¤ì •ì—ì„œ ë¸”ë¡œê·¸ë¥¼ ë¨¼ì € ì €ì¥í•˜ì„¸ìš”!"); return; }
    if(selIdx === ""){ toast("ë¸”ë¡œê·¸ë¥¼ ì„ íƒí•˜ì„¸ìš”!"); return; }
    if(!daily || daily < 1){ toast("í•˜ë£¨ ë°œí–‰ ê°œìˆ˜ëŠ” 1 ì´ìƒ!"); return; }

    const picked = blogs[parseInt(selIdx, 10)];
    const times = buildTimes(daily);

    const data = {
      blog: picked,
      dailyCount: daily,
      times,
      savedAt: new Date().toISOString()
    };

    localStorage.setItem(LS_PLAN, JSON.stringify(data));
    toast("âœ… ì˜ˆì•½ ì €ì¥ ì™„ë£Œ!");
    refreshPlanView();
    updateTimePreview();
  }

  function viewSchedule(){
    const raw = localStorage.getItem(LS_PLAN);
    if(!raw){ toast("ì €ì¥ëœ ì˜ˆì•½ì´ ì—†ì–´ìš”"); return; }
    const data = JSON.parse(raw);
    alert(
      "ì˜ˆì•½ ì •ë³´\n\n" +
      "ë¸”ë¡œê·¸: " + (data.blog.name || "ì´ë¦„ì—†ìŒ") + "\n" +
      "ì¢…ë¥˜: " + data.blog.type + "\n" +
      "ì£¼ì†Œ: " + data.blog.url + "\n" +
      "í•˜ë£¨ ë°œí–‰: " + data.dailyCount + "ê°œ\n" +
      "ì‹œê°„: " + (data.times || []).join(", ") + "\n" +
      "ì €ì¥ì‹œê°„: " + data.savedAt
    );
  }

  function clearSchedule(){
    localStorage.removeItem(LS_PLAN);
    toast("ì˜ˆì•½ ì‚­ì œ ì™„ë£Œ");
    refreshPlanView();
  }

  function refreshPlanView(){
    const out = document.getElementById("planView");
    const raw = localStorage.getItem(LS_PLAN);
    if(!raw){
      out.textContent = "ì €ì¥ëœ ì˜ˆì•½ì´ ì—†ì–´ìš”.";
      return;
    }
    const d = JSON.parse(raw);
    out.innerHTML =
      `âœ… ì €ì¥ë¨<br>` +
      `ë¸”ë¡œê·¸: <b>${escapeHtml(d.blog.name || "ì´ë¦„ì—†ìŒ")}</b> (${escapeHtml(d.blog.type)})<br>` +
      `ì£¼ì†Œ: ${escapeHtml(d.blog.url)}<br>` +
      `í•˜ë£¨ ë°œí–‰: ${escapeHtml(String(d.dailyCount))}ê°œ<br>` +
      `ì‹œê°„: ${escapeHtml((d.times||[]).join(", "))}<br>` +
      `ì €ì¥ì‹œê°„: ${escapeHtml(d.savedAt)}`;
  }

  // ---------- Instant publish (ë°”ë¡œ ë°œí–‰) ----------
  const instantOverlay = document.getElementById("instantOverlay");
  let INSTANT_SELECTED = ""; // ì„ íƒëœ ì£¼ì œ(í´ë¦­)

  function openInstant(){
    instantOverlay.style.display="flex";
    loadBlogsToSelect();
    rebuildInstantList();
    document.getElementById("instantPayload").textContent="ì•„ì§ ìƒì„± ì „ì…ë‹ˆë‹¤.";
    document.getElementById("instantSearch").value="";
    INSTANT_SELECTED="";
  }
  function closeInstant(){ instantOverlay.style.display="none"; }
  function closeInstantIfOutside(e){ if(e.target === instantOverlay) closeInstant(); }

  function rebuildInstantList(){
    const list = document.getElementById("instantList");
    list.innerHTML="";

    const merged = [...TOPIC_ITEMS, ...PROFIT_ITEMS];
    const fallback = (!merged.length)
      ? [{title:"(ì˜ˆì‹œ) ë³´í—˜ë£Œ ì¤„ì´ëŠ” ë°©ë²•", category:"ëˆ/ì¬í…Œí¬", type:"ìˆ˜ìµí˜•]()
