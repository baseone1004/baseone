<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BaseOne</title>
  <style>
    :root{
      --bg:#0f1630; --panel:rgba(255,255,255,.06); --panel2:rgba(255,255,255,.08);
      --text:#f8faff; --muted:rgba(248,250,255,.74); --border:rgba(255,255,255,.14);
      --primary:#7aa7ff; --good:#38e1c1; --danger:#ff7b7b; --shadow:0 10px 24px rgba(0,0,0,.22);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,"Noto Sans KR",Segoe UI,Roboto,sans-serif;background:linear-gradient(180deg,var(--bg),#0a1022);color:var(--text);font-size:13px}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1080px;margin:0 auto;padding:12px}
    .top{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;padding:8px 4px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:34px;height:34px;border-radius:12px;background:linear-gradient(135deg,var(--primary),var(--good));display:flex;align-items:center;justify-content:center;font-weight:900;color:#fff;box-shadow:var(--shadow)}
    .title{font-size:18px;font-weight:900;line-height:1}
    .subtitle{font-size:12px;color:var(--muted);margin-top:4px}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid var(--border);color:var(--muted);font-size:12px}
    .box{background:var(--panel);border:1px solid var(--border);padding:12px;border-radius:16px;margin:10px 0;box-shadow:var(--shadow)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:space-between}
    input,select,textarea{padding:9px 10px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);outline:none;font-size:12.5px}
    select{min-width:360px;max-width:100%}
    textarea{width:100%;min-height:140px;line-height:1.6}
    .btn{padding:8px 11px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);cursor:pointer;font-weight:900;font-size:12px}
    .btn.primary{background:linear-gradient(135deg,var(--primary),#2f6bff);border:none;color:#fff}
    .btn.good{background:linear-gradient(135deg,var(--good),#1fb6ff);border:none;color:#fff}
    .btn.danger{background:rgba(255,107,107,.10);border:1px solid rgba(255,107,107,.35);color:var(--danger)}
    .small{font-size:12px;color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:10px}
    @media(max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
    .cat{background:var(--panel2);border:1px solid var(--border);padding:10px;border-radius:14px;cursor:pointer}
    .cat:hover{border-color:rgba(122,167,255,.55)}
    .list{max-height:300px;overflow:auto;margin-top:10px;padding-right:6px}
    .item{background:var(--panel2);border:1px solid var(--border);padding:10px;border-radius:14px;display:flex;justify-content:space-between;gap:10px;align-items:center;margin-bottom:8px;cursor:pointer}
    .item.active{border-color:rgba(122,167,255,.85);box-shadow:0 0 0 2px rgba(122,167,255,.18);background:linear-gradient(135deg,rgba(122,167,255,.12),rgba(56,225,193,.10))}
    .itemTitle{font-weight:900}
    .itemMeta{font-size:11.5px;color:var(--muted);margin-top:4px}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    @media(max-width:900px){.two{grid-template-columns:1fr}}
    .card{background:var(--panel2);border:1px solid var(--border);border-radius:14px;padding:10px}
    .pre{margin-top:8px;border:1px solid var(--border);border-radius:12px;padding:10px;min-height:180px;white-space:pre-wrap;overflow:auto;background:rgba(0,0,0,.10)}
    .iframeWrap{margin-top:8px;background:#fff;border-radius:12px;overflow:hidden;border:1px solid var(--border);min-height:320px}
    iframe{width:100%;height:360px;border:0}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}

    /* í•˜ë‹¨ ì´ìƒí•œ ì˜ì–´/ë””ë²„ê·¸ ì˜ì—­ ë°©ì§€ìš© */
    #debug,#debugBar,#devlog,#statusBar,#footerDebug,.debug{display:none!important}
  </style>
</head>

<body>
<div class="wrap">
  <div class="top">
    <div class="brand">
      <div class="logo">B</div>
      <div>
        <div class="title">BaseOne</div>
        <div class="subtitle">Blogger(ë¸”ë¡œê·¸ìŠ¤íŒŸ) ìë™ë°œí–‰ / Gemini+Pexels ìƒì„±</div>
      </div>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
      <span class="pill">ğŸ›°ï¸ ì„œë²„ <b id="sv">-</b></span>
      <span class="pill">ğŸ” OAuth <b id="oauthBadge">-</b></span>
      <a href="/settings"><button class="btn">âš™ï¸ ì„¤ì •</button></a>
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>0) ì²´í¬</b>
        <div class="small mono">
          /health OK â†’ /oauth/start ë¡œê·¸ì¸ â†’ /api/oauth/status connected=true â†’ /api/blogger/blogs OK
        </div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn" onclick="oauthConnect()">ğŸ” OAuth ì—°ê²°</button>
        <button class="btn" onclick="refreshOAuth()">ğŸ”„ ìƒíƒœ</button>
      </div>
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>1) ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸°/ì„ íƒ</b>
        <div class="small">OAuth ì—°ê²° í›„ â€œë‚´ ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸°â€ë¥¼ ëˆ„ë¥´ë©´ ëª©ë¡ì´ ë‚˜ì˜µë‹ˆë‹¤.</div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn primary" onclick="loadBlogs()">ğŸ—‚ï¸ ë‚´ ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸°</button>
        <button class="btn" onclick="clearBlogRestriction()">ğŸš« ì œí•œ í•´ì œ</button>
      </div>
    </div>

    <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;align-items:center">
      <select id="blogSelect"></select>
      <button class="btn good" onclick="setActiveBlog()">âœ… ì„ íƒ</button>
      <span class="small">í˜„ì¬ ì„ íƒ: <b id="activeBlogText">-</b></span>
    </div>

    <div class="small" style="margin-top:8px">
      âš ï¸ â€œë¶ˆëŸ¬ì˜¨ ë¸”ë¡œê·¸ê°€ ì—†ë‹¤â€ë©´: settingsì—ì„œ <b>blogspot_urls ì œí•œ</b>ì´ ê±¸ë ¸ì„ í™•ë¥ ì´ í½ë‹ˆë‹¤.
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>2) ìˆ˜ìµí˜• ì£¼ì œ ë§Œë“¤ê¸°</b>
        <div class="small">ì¹´í…Œê³ ë¦¬ ëˆ„ë¥´ë©´ ì£¼ì œ 24ê°œ ìƒì„± â†’ í´ë¦­ í›„ ìƒì„±/ë°œí–‰</div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
        <input id="filter" placeholder="ğŸ” ê²€ìƒ‰" oninput="renderTopics()">
        <button class="btn" onclick="copyTopics()">ğŸ“‹ ì£¼ì œ ì „ì²´ë³µì‚¬</button>
      </div>
    </div>

    <div class="grid" id="catGrid"></div>
    <div class="list" id="topicList"></div>
  </div>

  <div class="box" id="previewBox" style="display:none">
    <div class="row">
      <div>
        <b>3) ìƒì„± ê²°ê³¼</b>
        <div class="small" id="previewMeta">-</div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn primary" onclick="generateNow()">âœ¨ ê¸€ ìƒì„±</button>
        <button class="btn good" onclick="publishNow()">ğŸš€ ì¦‰ì‹œë°œí–‰</button>
      </div>
    </div>

    <div class="two">
      <div class="card">
        <div style="font-weight:900">ğŸ“ HTML</div>
        <div class="pre" id="finalHtml"></div>
      </div>
      <div class="card">
        <div style="font-weight:900">ğŸ–¼ï¸ ì´ë¯¸ì§€/ì°¸ê³ </div>
        <div class="pre" id="imgInfo"></div>
        <img id="imgPreview" style="width:100%;border-radius:12px;border:1px solid var(--border);margin-top:8px;display:none" />
      </div>
    </div>

    <div class="card" style="margin-top:10px">
      <div style="font-weight:900">ğŸ‘€ ë¯¸ë¦¬ë³´ê¸°</div>
      <div class="iframeWrap"><iframe id="previewIframe"></iframe></div>
    </div>
  </div>

  <div class="box">
    <b>ìƒíƒœ/ë¡œê·¸</b>
    <div class="small mono" id="log" style="margin-top:8px;white-space:pre-wrap">-</div>
  </div>
</div>

<script>
/* ---------------- Settings storage ---------------- */
const SETTINGS_KEY="baseone_settings_v1";
function getSettings(){
  try{ return JSON.parse(localStorage.getItem(SETTINGS_KEY)||"{}"); }catch(e){ return {}; }
}
function apiBase(){
  const s=getSettings();
  return (s.backend || location.origin).replace(/\/+$/,"");
}
document.getElementById("sv").textContent = apiBase();

/* ---------------- Log ---------------- */
function log(msg){
  const el=document.getElementById("log");
  const t=new Date();
  const ts = String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0");
  el.textContent = `[${ts}] ${msg}\n` + (el.textContent==="-"? "" : el.textContent);
}

/* ---------------- OAuth ---------------- */
async function refreshOAuth(){
  try{
    const res=await fetch(apiBase()+"/api/oauth/status");
    const j=await res.json();
    document.getElementById("oauthBadge").textContent = j.connected ? "connected" : "not";
  }catch(e){
    document.getElementById("oauthBadge").textContent="error";
  }
}
function oauthConnect(){
  window.open(apiBase()+"/oauth/start","_blank");
}

/* ---------------- Blogger blogs ---------------- */
let blogs=[];
let activeBlog=null;

function esc(s){
  return String(s).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
}

async function loadBlogs(){
  log("ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...");
  try{
    const res=await fetch(apiBase()+"/api/blogger/blogs");
    const j=await res.json();
    if(!res.ok || !j.ok){
      alert("ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: OAuth ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.");
      log("ì‹¤íŒ¨: OAuth í•„ìš”");
      return;
    }

    blogs = j.items || [];

    // (ì¤‘ìš”) settingsì—ì„œ blogspot_urls ì œí•œì´ ì¼œì ¸ ìˆìœ¼ë©´ í•„í„°ë¨
    const s=getSettings();
    const useRestrict = !!s.use_blogspot_restrict;
    const allow = (s.blogspot_urls||[]).map(x=>x.trim()).filter(Boolean);

    if(useRestrict && allow.length){
      blogs = blogs.filter(b => allow.includes((b.url||"").trim()));
    }

    if(!blogs.length){
      alert("ë¶ˆëŸ¬ì˜¨ ë¸”ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤. (ì„¤ì •ì˜ blogspot_urls ì œí•œì´ ì¼œì ¸ìˆì„ ìˆ˜ ìˆìŒ)");
      log("ë¶ˆëŸ¬ì˜¨ ë¸”ë¡œê·¸ 0ê°œ");
      renderBlogSelect();
      return;
    }

    // ì €ì¥ëœ activeBlog ë³µêµ¬
    const savedId = localStorage.getItem("baseone_active_blog_id") || "";
    activeBlog = blogs.find(b=>b.id===savedId) || blogs[0];
    localStorage.setItem("baseone_active_blog_id", activeBlog.id);

    renderBlogSelect();
    log("ë¸”ë¡œê·¸ ë¡œë“œ ì™„ë£Œ: "+blogs.length+"ê°œ");
    alert("ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ!");
  }catch(e){
    alert("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
    log("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
  }
}

function renderBlogSelect(){
  const sel=document.getElementById("blogSelect");
  sel.innerHTML="";
  if(!blogs.length){
    const opt=document.createElement("option");
    opt.value="";
    opt.textContent="(ë¸”ë¡œê·¸ ì—†ìŒ) â†’ OAuth ì—°ê²° í›„ 'ë‚´ ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸°'";
    sel.appendChild(opt);
    document.getElementById("activeBlogText").textContent="-";
    return;
  }
  blogs.forEach(b=>{
    const opt=document.createElement("option");
    opt.value=JSON.stringify(b);
    opt.textContent = `${b.name} (${b.url})`;
    sel.appendChild(opt);
  });

  // activeBlogë¡œ ì„ íƒë˜ê²Œ
  if(activeBlog){
    for(let i=0;i<sel.options.length;i++){
      try{
        const b=JSON.parse(sel.options[i].value);
        if(b.id===activeBlog.id){ sel.selectedIndex=i; break; }
      }catch(e){}
    }
    document.getElementById("activeBlogText").textContent = activeBlog.name || activeBlog.url || activeBlog.id;
  }
}

function setActiveBlog(){
  const v=document.getElementById("blogSelect").value;
  if(!v){ alert("ë¸”ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤."); return; }
  activeBlog = JSON.parse(v);
  localStorage.setItem("baseone_active_blog_id", activeBlog.id);
  document.getElementById("activeBlogText").textContent = activeBlog.name || activeBlog.url || activeBlog.id;
  alert("ë¸”ë¡œê·¸ ì„ íƒ ì™„ë£Œ!");
  log("activeBlog="+activeBlog.id);
}

function clearBlogRestriction(){
  const s=getSettings();
  s.use_blogspot_restrict=false;
  s.blogspot_urls=[];
  localStorage.setItem(SETTINGS_KEY, JSON.stringify(s));
  alert("ì œí•œ í•´ì œ ì™„ë£Œ! ì´ì œ 'ë‚´ ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸°' ë‹¤ì‹œ ëˆ„ë¥´ì„¸ìš”.");
}

/* ---------------- Topics ---------------- */
const CATS=[
  {k:"ì •ë¶€ì§€ì›", s:"ì§€ì›ê¸ˆ/ì •ì±…"},
  {k:"ì—°ë§ì •ì‚°", s:"í™˜ê¸‰/ê³µì œ"},
  {k:"ì¹´ë“œí˜œíƒ", s:"ìºì‹œë°±/í¬ì¸íŠ¸"},
  {k:"ëŒ€ì¶œ/ê¸ˆë¦¬", s:"ê°ˆì•„íƒ€ê¸°/ì´ì"},
  {k:"ë³´í—˜", s:"íŠ¹ì•½/ë³´í—˜ë£Œ"},
  {k:"í†µì‹ ë¹„", s:"ìš”ê¸ˆì œ/í• ì¸"},
  {k:"ì „ê¸°Â·ê°€ìŠ¤", s:"ìš”ê¸ˆ ì ˆì•½"},
  {k:"ì ˆì•½/ê³ ì •ë¹„", s:"ì§€ì¶œê´€ë¦¬"},
];
const catGrid=document.getElementById("catGrid");
CATS.forEach(o=>{
  const d=document.createElement("div");
  d.className="cat";
  d.onclick=()=>makeTopics(o.k);
  d.innerHTML=`<b>${esc(o.k)}</b><div class="small">${esc(o.s)}</div>`;
  catGrid.appendChild(d);
});

let topics=[]; // {id,title}
let selectedCat="";
let selectedId="";
let lastGeneratedHtml="";

function buildIdeas(cat){
  const hooks=["ì´ˆë³´ë„ ë°”ë¡œ ë˜ëŠ”","ëˆ ë˜ëŠ”","ì˜¤ëŠ˜ë¶€í„° ì ìš©","ì‹¤ìˆ˜ ì¤„ì´ëŠ”","ë†“ì¹˜ë©´ ì†í•´","ì •ë¦¬ ëë‚´ëŠ”"];
  const bases=[
    "ì‹ ì²­ ì¡°ê±´/ëŒ€ìƒ/ê¸°ê°„ ì´ì •ë¦¬",
    "í•„ìš”ì„œë¥˜/ì¤€ë¹„ë¬¼ ì²´í¬ë¦¬ìŠ¤íŠ¸",
    "ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ TOP 10",
    "ìµœëŒ€ í™˜ê¸‰/ì ˆì•½ ë°›ëŠ” ë°©ë²•",
    "ì£¼ì˜ì‚¬í•­/ë¶ˆì´ìµ ì •ë¦¬",
    "ë‹¨ê³„ë³„ ë”°ë¼í•˜ê¸° ê°€ì´ë“œ"
  ];
  const out=new Set();
  while(out.size<24){
    const h=hooks[Math.floor(Math.random()*hooks.length)];
    const b=bases[Math.floor(Math.random()*bases.length)];
    out.add(`${h} ${cat} ${b}`);
  }
  return [...out];
}

function makeTopics(cat){
  selectedCat=cat;
  const arr=buildIdeas(cat);
  topics=arr.map((t,i)=>({id:`${Date.now()}_${i}`, title:t}));
  selectedId=topics[0]?.id||"";
  renderTopics();
  showPreview(false);
  log("ì£¼ì œ ìƒì„±: "+cat);
}

function renderTopics(){
  const q=(document.getElementById("filter").value||"").trim().toLowerCase();
  const box=document.getElementById("topicList");
  box.innerHTML="";
  let arr=topics.slice();
  if(q) arr=arr.filter(x=>x.title.toLowerCase().includes(q));
  if(!arr.length){
    box.innerHTML=`<div class="small">ì£¼ì œ ì—†ìŒ (ì¹´í…Œê³ ë¦¬ í´ë¦­)</div>`;
    return;
  }
  arr.forEach(it=>{
    const d=document.createElement("div");
    d.className="item"+(it.id===selectedId?" active":"");
    d.onclick=()=>{ selectedId=it.id; renderTopics(); showPreview(false); };
    d.innerHTML=`
      <div style="flex:1">
        <div class="itemTitle">${esc(it.title)}</div>
        <div class="itemMeta">ğŸ·ï¸ ${esc(selectedCat||"-")}</div>
      </div>
      <button class="btn" onclick="event.stopPropagation(); navigator.clipboard.writeText('${it.title.replaceAll("'","\\'")}'); alert('ë³µì‚¬ ì™„ë£Œ!');">ë³µì‚¬</button>
    `;
    box.appendChild(d);
  });
}

function selectedTitle(){
  return topics.find(x=>x.id===selectedId)?.title || "";
}

function copyTopics(){
  if(!topics.length){ alert("ì£¼ì œ ì—†ìŒ"); return; }
  navigator.clipboard.writeText(topics.map(t=>t.title).join("\n"));
  alert("ì£¼ì œ ì „ì²´ë³µì‚¬ ì™„ë£Œ!");
}

/* ---------------- Generate + Publish ---------------- */
function showPreview(on){
  document.getElementById("previewBox").style.display = on ? "block" : "none";
}

async function generateNow(){
  const s=getSettings();
  if(!s.gemini_key){
    alert("settingsì—ì„œ GEMINI_API_KEY ë¨¼ì € ì €ì¥í•˜ì„¸ìš”.");
    return;
  }

  const title=selectedTitle();
  if(!title){ alert("ì£¼ì œ ì„ íƒ"); return; }

  showPreview(false);
  log("ê¸€ ìƒì„± ìš”ì²­: "+title);

  try{
    const res=await fetch(apiBase()+"/api/generate",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({
        topic:title,
        gemini_key:s.gemini_key,
        pexels_key:(s.pexels_key||"")
      })
    });
    const j=await res.json();
    if(!res.ok || !j.ok){
      alert("ìƒì„± ì‹¤íŒ¨");
      log("ìƒì„± ì‹¤íŒ¨");
      return;
    }

    lastGeneratedHtml = j.html || "";
    document.getElementById("finalHtml").textContent = lastGeneratedHtml;
    document.getElementById("previewMeta").textContent = `ğŸ§  ${title} / ğŸ·ï¸ ${selectedCat}`;

    // img preview (ì•ì— img tagê°€ ë¶™ì–´ì„œ ì˜´)
    const imgMatch = lastGeneratedHtml.match(/<img[^>]+src="([^"]+)"/i);
    const imgUrl = imgMatch ? imgMatch[1] : "";
    document.getElementById("imgInfo").textContent = imgUrl ? imgUrl : "(ì´ë¯¸ì§€ ì—†ìŒ)";
    const img=document.getElementById("imgPreview");
    if(imgUrl){
      img.src=imgUrl; img.style.display="block";
    }else{
      img.style.display="none";
    }

    document.getElementById("previewIframe").srcdoc =
      `<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
      <style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;padding:16px;line-height:1.7}</style>
      </head><body>${lastGeneratedHtml}</body></html>`;

    showPreview(true);
    log("ìƒì„± ì™„ë£Œ");
  }catch(e){
    alert("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
    log("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
  }
}

async function publishNow(){
  if(!activeBlog || !activeBlog.id){
    alert("ë¸”ë¡œê·¸ë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”.");
    return;
  }
  const title=selectedTitle();
  if(!title){ alert("ì£¼ì œ ì„ íƒ"); return; }
  if(!lastGeneratedHtml){
    alert("ë¨¼ì € ê¸€ ìƒì„±(âœ¨)ì„ í•˜ì„¸ìš”.");
    return;
  }

  log("ë°œí–‰ ìš”ì²­...");
  try{
    const res=await fetch(apiBase()+"/api/blogger/post",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({
        blog_id: activeBlog.id,
        title: title,
        html: lastGeneratedHtml
      })
    });
    const j=await res.json();
    if(!res.ok || !j.ok){
      alert("ë°œí–‰ ì‹¤íŒ¨: "+(j.error||"unknown"));
      log("ë°œí–‰ ì‹¤íŒ¨");
      return;
    }
    alert("ë°œí–‰ ì™„ë£Œ!\n"+(j.url||""));
    log("ë°œí–‰ ì™„ë£Œ: "+(j.url||""));
  }catch(e){
    alert("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
    log("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
  }
}

/* init */
refreshOAuth();
makeTopics("ì •ë¶€ì§€ì›");
</script>
</body>
</html>
