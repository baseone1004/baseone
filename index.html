<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BaseOne</title>
  <style>
    :root{
      --bg:#0f1630; --panel:rgba(255,255,255,.06); --panel2:rgba(255,255,255,.08);
      --text:#f8faff; --muted:rgba(248,250,255,.75); --border:rgba(255,255,255,.14);
      --primary:#7aa7ff; --good:#38e1c1; --danger:#ff7b7b; --shadow:0 10px 24px rgba(0,0,0,.22);
    }
    body{margin:0;font-family:system-ui,-apple-system,"Noto Sans KR",Segoe UI,Roboto,sans-serif;background:linear-gradient(180deg,var(--bg),#0a1022);color:var(--text);font-size:13px}
    .wrap{max-width:980px;margin:0 auto;padding:14px}
    .top{display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:34px;height:34px;border-radius:12px;background:linear-gradient(135deg,var(--primary),var(--good));display:flex;align-items:center;justify-content:center;font-weight:900;color:#fff;box-shadow:var(--shadow)}
    .title{font-size:18px;font-weight:900}
    .subtitle{font-size:12px;color:var(--muted);margin-top:4px}
    .pill{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--muted);font-size:12px}
    .box{margin-top:12px;background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:12px;box-shadow:var(--shadow)}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between}
    select,input,textarea{padding:10px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);outline:none}
    select{min-width:300px}
    textarea{width:100%;min-height:180px;line-height:1.7}
    .btn{padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);cursor:pointer;font-weight:900}
    .btn.primary{background:linear-gradient(135deg,var(--primary),#2f6bff);border:none}
    .btn.good{background:linear-gradient(135deg,var(--good),#1fb6ff);border:none}
    .btn.danger{background:rgba(255,107,107,.10);border:1px solid rgba(255,107,107,.35);color:var(--danger)}
    .small{color:var(--muted);font-size:12px}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:10px}
    @media(max-width:900px){.grid{grid-template-columns:1fr}}
    .item{background:var(--panel2);border:1px solid var(--border);border-radius:14px;padding:10px;display:flex;justify-content:space-between;gap:10px;align-items:center;cursor:pointer}
    .item.active{border-color:rgba(122,167,255,.85);box-shadow:0 0 0 2px rgba(122,167,255,.18);background:linear-gradient(135deg,rgba(122,167,255,.12),rgba(56,225,193,.10))}
    .pre{margin-top:8px;background:rgba(0,0,0,.10);border:1px solid var(--border);border-radius:12px;padding:10px;white-space:pre-wrap;overflow:auto;min-height:160px}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    @media(max-width:900px){.two{grid-template-columns:1fr}}
    .iframeWrap{margin-top:8px;background:#fff;border-radius:12px;overflow:hidden;border:1px solid var(--border);min-height:320px}
    iframe{width:100%;height:320px;border:0}
    .hint{margin-top:10px;padding:10px;border-radius:12px;border:1px solid rgba(122,167,255,.35);background:rgba(122,167,255,.10);color:var(--muted)}
  </style>
</head>
<body>
<div class="wrap">

  <div class="top">
    <div class="brand">
      <div class="logo">B</div>
      <div>
        <div class="title">BaseOne</div>
        <div class="subtitle">ìˆ˜ìµí˜• ì£¼ì œ â†’ Gemini ê¸€ ìƒì„± â†’ ë¸”ë¡œê·¸ìŠ¤íŒŸ ìë™ë°œí–‰ / ë„¤ì´ë²„ ë³µë¶™</div>
      </div>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
      <span class="pill">ğŸ›°ï¸ ì„œë²„ <b id="sv">-</b></span>
      <a href="/settings"><button class="btn">âš™ï¸ ì„¤ì •</button></a>
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>1) ë¸”ë¡œê·¸ ì„ íƒ</b>
        <div class="small">ì„¤ì •ì—ì„œ ì €ì¥í•œ URLì´ í‘œì‹œë©ë‹ˆë‹¤.</div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
        <select id="blogSelect"></select>
        <button class="btn" onclick="loadBlogs()">ğŸ”„</button>
      </div>
    </div>
    <div class="small" style="margin-top:8px">âœ… í˜„ì¬ ì„ íƒ: <b id="blogNow">-</b> / ëª¨ë“œ: <b id="modeNow">-</b></div>

    <div class="hint" id="oauthHint" style="display:none">
      ğŸŸ¦ ë¸”ë¡œê·¸ìŠ¤íŒŸ ìë™ë°œí–‰ì€ OAuthê°€ í•„ìš”í•´ìš”.
      <button class="btn primary" style="margin-left:8px" onclick="oauthStart()">ğŸ” OAuth ì—°ê²°</button>
      <button class="btn" style="margin-left:6px" onclick="checkOAuth()">ì—°ê²°í™•ì¸</button>
      <span class="small" id="oauthStatus" style="margin-left:8px"></span>
    </div>
  </div>

  <div class="box">
    <div class="row">
      <div>
        <b>2) ìˆ˜ìµí˜• ì£¼ì œ ìƒì„±</b>
        <div class="small">ëˆ ë˜ëŠ” ì£¼ì œë§Œ ë½‘ìŠµë‹ˆë‹¤.</div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn good" onclick="makeTopics('money')">ğŸ’° ìˆ˜ìµí˜• 30</button>
        <button class="btn danger" onclick="makeTopics('cpc')">ğŸ”¥ ê³ CPC 30</button>
        <input id="q" placeholder="ğŸ” ê²€ìƒ‰" oninput="renderTopics()" />
      </div>
    </div>

    <div class="grid" id="topicList"></div>
    <div class="small" style="margin-top:8px">ì„ íƒ ì£¼ì œ: <b id="selTopic">-</b></div>
    <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
      <button class="btn primary" onclick="generate()">âœ¨ Geminië¡œ ê¸€ ìƒì„±</button>
      <button class="btn" onclick="copyTopic()">ğŸ“‹ ì£¼ì œ ë³µì‚¬</button>
    </div>
  </div>

  <div class="box" id="previewBox" style="display:none">
    <div class="row">
      <div>
        <b>3) ê²°ê³¼</b>
        <div class="small" id="meta">-</div>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn" onclick="openPreview()">ğŸ§¾ ìƒˆì°½ ë¯¸ë¦¬ë³´ê¸°</button>

        <!-- blogspot -->
        <button class="btn good" id="btnPublishBlogger" onclick="publishBlogger()" style="display:none">ğŸŸ¦ ë¸”ë¡œê·¸ìŠ¤íŒŸ ì¦‰ì‹œë°œí–‰</button>

        <!-- naver -->
        <button class="btn" id="btnCopyNaver" onclick="copyForNaver()" style="display:none">ğŸŸ© ë„¤ì´ë²„ìš© ë³µì‚¬</button>
        <button class="btn" id="btnOpenNaver" onclick="openNaver()" style="display:none">ğŸŸ© ë„¤ì´ë²„ ê¸€ì“°ê¸° ì—´ê¸°</button>
      </div>
    </div>

    <div class="two">
      <div>
        <div style="font-weight:900">ğŸ“ HTML ë³¸ë¬¸</div>
        <div class="pre" id="finalBody"></div>
      </div>
      <div>
        <div style="font-weight:900">ğŸ–¼ï¸ ì´ë¯¸ì§€</div>
        <div class="pre" id="finalImage"></div>
        <div style="margin-top:10px">
          <img id="img" style="width:100%;border-radius:12px;border:1px solid var(--border);display:none" />
          <div class="small" id="imgHint" style="margin-top:8px">Pexels URLì´ ìˆìœ¼ë©´ ë³´ì…ë‹ˆë‹¤.</div>
        </div>
      </div>
    </div>

    <div style="margin-top:10px">
      <div style="font-weight:900">ğŸ‘€ HTML ë¯¸ë¦¬ë³´ê¸°</div>
      <div class="iframeWrap"><iframe id="iframe"></iframe></div>
    </div>
  </div>

</div>

<script>
const KEY="baseone_settings_v4";

function getSettings(){
  return JSON.parse(localStorage.getItem(KEY) || "{}");
}
function apiBase(){
  const d=getSettings();
  return (d.backend || "").trim().replace(/\/+$/,"");
}

const API_BASE = apiBase();
document.getElementById("sv").textContent = API_BASE || "(ì„¤ì • í•„ìš”)";

let blogs=[]; // {type,url, blog_id?, name?}
let selectedBlog=null;

let topics=[];
let selectedTopic="";

function escapeHtml(s){ return String(s).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;"); }

function loadBlogs(){
  const d=getSettings();
  const arr=[];
  (d.blogspot||[]).slice(0,10).forEach(u=>arr.push({type:"blogspot", url:u}));
  (d.naver||[]).slice(0,3).forEach(u=>arr.push({type:"naver", url:u}));
  blogs=arr;

  const sel=document.getElementById("blogSelect");
  sel.innerHTML="";
  if(!blogs.length){
    const o=document.createElement("option");
    o.value=""; o.textContent="ì„¤ì •ì—ì„œ ë¸”ë¡œê·¸ë¥¼ ë¨¼ì € ì €ì¥í•˜ì„¸ìš”";
    sel.appendChild(o);
    document.getElementById("blogNow").textContent="-";
    document.getElementById("modeNow").textContent="-";
    return;
  }

  blogs.forEach((b,i)=>{
    const o=document.createElement("option");
    o.value=String(i);
    o.textContent = (b.type==="blogspot" ? `ğŸŸ¦ ë¸”ë¡œê·¸ìŠ¤íŒŸ ${i+1}` : `ğŸŸ© ë„¤ì´ë²„ ${i+1}`) + " - " + b.url;
    sel.appendChild(o);
  });

  sel.onchange=()=>selectBlog(Number(sel.value));
  selectBlog(0);
}

async function selectBlog(i){
  selectedBlog = blogs[i] || null;
  document.getElementById("blogNow").textContent = selectedBlog ? `${selectedBlog.type} / ${selectedBlog.url}` : "-";

  // ëª¨ë“œ UI
  const modeEl=document.getElementById("modeNow");
  const oauthHint=document.getElementById("oauthHint");
  if(selectedBlog?.type==="blogspot"){
    modeEl.textContent="ë¸”ë¡œê·¸ìŠ¤íŒŸ(ìë™ë°œí–‰)";
    oauthHint.style.display="block";
    await checkOAuth();
    await tryFetchBloggerId();
  }else if(selectedBlog?.type==="naver"){
    modeEl.textContent="ë„¤ì´ë²„(ë³µì‚¬/ë¶™ì—¬ë„£ê¸°)";
    oauthHint.style.display="none";
  }else{
    modeEl.textContent="-";
    oauthHint.style.display="none";
  }

  // ê²°ê³¼ ë²„íŠ¼ ëª¨ë“œë„ ê°±ì‹ 
  refreshActionButtons();
}

function refreshActionButtons(){
  const isBlogger = selectedBlog?.type==="blogspot";
  const isNaver = selectedBlog?.type==="naver";
  document.getElementById("btnPublishBlogger").style.display = isBlogger ? "inline-block" : "none";
  document.getElementById("btnCopyNaver").style.display = isNaver ? "inline-block" : "none";
  document.getElementById("btnOpenNaver").style.display = isNaver ? "inline-block" : "none";
}

function oauthStart(){
  if(!API_BASE){ alert("ì„¤ì •ì—ì„œ ì„œë²„ ì£¼ì†Œë¥¼ ì €ì¥í•˜ì„¸ìš”"); return; }
  window.open(API_BASE + "/oauth/start", "_blank");
}
async function checkOAuth(){
  const s=document.getElementById("oauthStatus");
  if(!API_BASE){ s.textContent="(ì„œë²„ ì£¼ì†Œ ì—†ìŒ)"; return; }
  try{
    const res = await fetch(API_BASE + "/api/oauth/status", {credentials:"include"});
    const j = await res.json().catch(()=>({}));
    s.textContent = j.connected ? "âœ… ì—°ê²°ë¨" : "âŒ ë¯¸ì—°ê²°";
  }catch(e){
    s.textContent="âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨";
  }
}

async function tryFetchBloggerId(){
  // ë¸”ë¡œê·¸ìŠ¤íŒŸì€ ì‹¤ì œ ë°œí–‰í•˜ë ¤ë©´ blog_idê°€ í•„ìš”í•¨
  if(selectedBlog?.type!=="blogspot") return;
  if(selectedBlog.blog_id) return;
  if(!API_BASE) return;

  try{
    const res = await fetch(API_BASE + "/api/blogger/blogs");
    const j = await res.json().catch(()=>({}));
    if(!res.ok || !j.ok) return;

    // url ë§¤ì¹­í•´ì„œ id ì €ì¥
    const found = (j.items||[]).find(x => (x.url||"").replace(/\/+$/,"") === (selectedBlog.url||"").replace(/\/+$/,""));
    if(found){
      selectedBlog.blog_id = found.id;
      selectedBlog.name = found.name;
    }
  }catch(e){}
}

function makeTopics(mode){
  const moneySeeds = [
    "ì—°ë§ì •ì‚°", "í™˜ê¸‰ê¸ˆ", "ì •ë¶€ì§€ì›ê¸ˆ", "ë³´í—˜ë£Œ", "ì‹¤ì†ë³´í—˜", "ìë™ì°¨ë³´í—˜", "ì¹´ë“œí˜œíƒ", "í†µì‹ ë¹„", "ëŒ€ì¶œì´ì",
    "ì „ì„¸/ì›”ì„¸", "ì¤‘ê³ ì°¨", "ê±´ê°•ê²€ì§„", "ì˜ì–‘ì œ", "ì¹˜ê³¼", "ì´ì‚¬ë¹„ìš©", "ë Œíƒˆ", "ì²­ì†Œ", "ì„¸ê¸ˆ", "ì‚¬ì—…ì"
  ];
  const cpcSeeds = [
    "ë³´í—˜ ë¹„êµ", "ëŒ€ì¶œ ê°ˆì•„íƒ€ê¸°", "ì‹ ìš©ì ìˆ˜", "ë²•ë¥  ìƒë‹´", "ì„¸ë¬´", "ìë™ì°¨ ì‚¬ê³ ", "ì¹˜ê³¼ ì¹˜ë£Œ",
    "ê±´ê°•ë³´í—˜", "ì‹¤ë¹„ ì²­êµ¬", "ì¹´ë“œ ì¶”ì²œ", "í†µì‹ ì‚¬ ë³€ê²½", "ë Œíƒˆ ë¹„êµ", "ì´ì‚¬ ê²¬ì ", "ì¤‘ê³ ì°¨ êµ¬ë§¤"
  ];

  const hooks = [
    "ëª¨ë¥´ë©´ ì†í•´ ë³´ëŠ”", "ëŒ€ë¶€ë¶„ ë†“ì¹˜ëŠ”", "ì§€ê¸ˆ ì‹ ì²­í•´ì•¼ í•˜ëŠ”", "í•œ ë²ˆë§Œ í•´ë„ ì´ë“ì¸",
    "ì´ˆë³´ë„ ë”°ë¼í•˜ëŠ”", "ì‹¤ìˆ˜ ì—†ì´ ëë‚´ëŠ”", "ë°”ë¡œ í™•ì¸ ê°€ëŠ¥í•œ", "í•µì‹¬ë§Œ ì •ë¦¬í•œ"
  ];
  const patterns = [
    "{seed} í™˜ê¸‰/ì§€ì›ê¸ˆ í™•ì¸ ë°©ë²•",
    "{seed} ë¹„ìš© ì¤„ì´ëŠ” ìˆœì„œ",
    "{seed} ì‹ ì²­/ë³€ê²½ ì ˆì°¨ ì´ì •ë¦¬",
    "{seed} ì²´í¬ë¦¬ìŠ¤íŠ¸ {n}ê°€ì§€",
    "{seed}ì—ì„œ ê°€ì¥ ë§ì´ í•˜ëŠ” ì‹¤ìˆ˜ TOP {n}",
    "{seed} ë¹„êµí•  ë•Œ ê¼­ ë´ì•¼ í•  5ê°€ì§€"
  ];

  const seeds = (mode==="cpc") ? cpcSeeds : moneySeeds;
  const out=new Set();
  let tries=0;
  while(out.size<30 && tries<800){
    tries++;
    const seed = seeds[Math.floor(Math.random()*seeds.length)];
    const hook = hooks[Math.floor(Math.random()*hooks.length)];
    const pat = patterns[Math.floor(Math.random()*patterns.length)];
    const n = 5 + Math.floor(Math.random()*6);
    out.add((hook + " " + pat.replaceAll("{seed}", seed).replaceAll("{n}", String(n))).trim());
  }
  topics=[...out];
  selectedTopic=topics[0] || "";
  document.getElementById("selTopic").textContent = selectedTopic || "-";
  renderTopics();
}

function renderTopics(){
  const q=(document.getElementById("q").value||"").trim().toLowerCase();
  const box=document.getElementById("topicList");
  box.innerHTML="";
  let arr=topics.slice();
  if(q) arr=arr.filter(t=>t.toLowerCase().includes(q));
  if(!arr.length){
    box.innerHTML = `<div class="small">ì£¼ì œê°€ ì—†ìŠµë‹ˆë‹¤. ìœ„ ë²„íŠ¼ìœ¼ë¡œ ìƒì„±í•˜ì„¸ìš”.</div>`;
    return;
  }
  arr.forEach(t=>{
    const d=document.createElement("div");
    d.className="item"+(t===selectedTopic?" active":"");
    d.onclick=()=>{
      selectedTopic=t;
      document.getElementById("selTopic").textContent=t;
      renderTopics();
    };
    d.innerHTML = `<div style="flex:1"><b>${escapeHtml(t)}</b><div class="small">í´ë¦­í•´ì„œ ì„ íƒ</div></div>
                   <button class="btn" onclick="event.stopPropagation(); navigator.clipboard.writeText('${t.replaceAll("'","\\'")}'); alert('ë³µì‚¬ ì™„ë£Œ!')">ë³µì‚¬</button>`;
    box.appendChild(d);
  });
}

function copyTopic(){
  if(!selectedTopic){ alert("ì£¼ì œë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”"); return; }
  navigator.clipboard.writeText(selectedTopic);
  alert("ì£¼ì œ ë³µì‚¬ ì™„ë£Œ!");
}

async function generate(){
  const d=getSettings();
  if(!API_BASE){ alert("ì„¤ì •ì—ì„œ ì„œë²„ ì£¼ì†Œ ì €ì¥í•˜ì„¸ìš”"); return; }
  if(!d.gemini_key){ alert("ì„¤ì •ì—ì„œ GEMINI_API_KEY ì €ì¥í•˜ì„¸ìš”"); return; }
  if(!selectedBlog){ alert("ë¸”ë¡œê·¸ ì„ íƒí•˜ì„¸ìš”"); return; }
  if(!selectedTopic){ alert("ì£¼ì œë¥¼ ìƒì„±/ì„ íƒí•˜ì„¸ìš”"); return; }

  const payload={
    topic: selectedTopic,
    category: "ëˆë˜ëŠ”ì •ë³´",
    img_provider: (d.pexels_key ? "pexels" : "gemini"),
    pexels_key: d.pexels_key || "",
    gemini_key: d.gemini_key || ""
  };

  document.getElementById("previewBox").style.display="none";

  try{
    const res = await fetch(API_BASE + "/api/generate",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify(payload)
    });
    const j = await res.json().catch(()=>({}));
    if(!res.ok || !j.ok){
      alert("ìƒì„± ì‹¤íŒ¨: " + (j.error || "unknown"));
      return;
    }

    // í™”ë©´ í‘œì‹œ
    document.getElementById("meta").textContent =
      `ğŸ§  ${j.topic} / â±ï¸ ${j.generated_at} / ì´ë¯¸ì§€: ${j.image_provider}`;

    document.getElementById("finalBody").textContent = j.html || "";
    document.getElementById("finalImage").textContent =
      (j.image_prompt ? (j.image_prompt + "\n" + (j.image_url||"")) : (j.image_url||""));

    const iframe=document.getElementById("iframe");
    iframe.srcdoc = `<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
      <style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;padding:16px;line-height:1.7}</style></head>
      <body>${j.html || ""}</body></html>`;

    const img=document.getElementById("img");
    const hint=document.getElementById("imgHint");
    if(j.image_url){
      img.src=j.image_url;
      img.style.display="block";
      hint.style.display="none";
    }else{
      img.style.display="none";
      hint.style.display="block";
    }

    document.getElementById("previewBox").style.display="block";
    refreshActionButtons();

  }catch(e){
    alert("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
  }
}

function openPreview(){
  const body = document.getElementById("finalBody").textContent.trim();
  if(!body){ alert("ë³¸ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤."); return; }
  const w = window.open("", "_blank");
  w.document.open();
  w.document.write(`<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ë¯¸ë¦¬ë³´ê¸°</title><style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif;padding:16px;line-height:1.7}</style>
  </head><body>${body}</body></html>`);
  w.document.close();
}

async function publishBlogger(){
  if(selectedBlog?.type!=="blogspot"){ alert("ë¸”ë¡œê·¸ìŠ¤íŒŸì„ ì„ íƒí•˜ì„¸ìš”"); return; }
  if(!API_BASE){ alert("ì„œë²„ ì£¼ì†Œ ì—†ìŒ"); return; }
  const html = document.getElementById("finalBody").textContent.trim();
  if(!html){ alert("ë¨¼ì € ê¸€ì„ ìƒì„±í•˜ì„¸ìš”"); return; }

  await tryFetchBloggerId();
  if(!selectedBlog.blog_id){
    alert("blog_idë¥¼ ëª» ì°¾ì•˜ì–´ìš”. OAuth ì—°ê²° í›„ ë‹¤ì‹œ ì‹œë„í•˜ê±°ë‚˜ /api/blogger/blogsì—ì„œ ëª©ë¡ì„ ë¶ˆëŸ¬ì™€ì•¼ í•©ë‹ˆë‹¤.");
    return;
  }

  try{
    const res = await fetch(API_BASE + "/api/blogger/post",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({
        blog_id: selectedBlog.blog_id,
        title: selectedTopic,
        html: html,
        labels: ["ìˆ˜ìµí˜•","ìë™ì‘ì„±"]
      })
    });
    const j = await res.json().catch(()=>({}));
    if(!res.ok || !j.ok){
      alert("ë°œí–‰ ì‹¤íŒ¨: " + (j.error || "unknown"));
      return;
    }
    alert("âœ… ë°œí–‰ ì™„ë£Œ!\n" + (j.url || ""));
    if(j.url) window.open(j.url, "_blank");
  }catch(e){
    alert("ì„œë²„ ì—°ê²° ì‹¤íŒ¨");
  }
}

function copyForNaver(){
  const html = document.getElementById("finalBody").textContent.trim();
  if(!html){ alert("ë¨¼ì € ê¸€ì„ ìƒì„±í•˜ì„¸ìš”"); return; }
  navigator.clipboard.writeText(html);
  alert("ë„¤ì´ë²„ìš© ë³¸ë¬¸ ë³µì‚¬ ì™„ë£Œ! ë„¤ì´ë²„ ê¸€ì“°ê¸°ì—ì„œ ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.");
}

function openNaver(){
  window.open("https://blog.naver.com/PostWriteForm.naver", "_blank");
}

loadBlogs();
</script>
</body>
</html>
